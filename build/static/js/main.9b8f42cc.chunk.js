(this["webpackJsonpmagic-polygon"]=this["webpackJsonpmagic-polygon"]||[]).push([[0],{259:function(e,t){},282:function(e,t){},284:function(e,t){},356:function(e,t){},358:function(e,t){},390:function(e,t){},395:function(e,t){},397:function(e,t){},404:function(e,t){},417:function(e,t){},440:function(e,t){},518:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(221),r=n(10),s=n(225),i=n(17),u=n.n(i),o=n(55),l=n(16),b=n(126),j=n(123),d=n.n(j),h=new b.a("pk_test_5E4043193D569716",{network:{rpcUrl:"https://rpc-mumbai.matic.today",chainId:80001}});h.network="matic";var f=new d.a(h.rpcProvider),p=new b.a("pk_test_5E4043193D569716",{network:"ropsten"});p.network="ethereum";var O=new d.a(p.rpcProvider),m=n(2);function x(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),i=Object(l.a)(s,2),b=i[0],j=i[1],d=Object(r.f)(),h=Object(c.useCallback)(Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,p.auth.loginWithMagicLink({email:n,redirectURI:new URL("/callback",window.location.origin).href});case 4:d.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(!1);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),[n]),f=Object(c.useCallback)((function(e){a(e.target.value)}),[]);return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:"Please sign up or login"}),Object(m.jsx)("input",{type:"email",name:"email",required:"required",placeholder:"Enter your email",onChange:f,disabled:b}),Object(m.jsx)("button",{onClick:h,disabled:b,children:"Send"})]})}function g(){return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("p",{children:"Loading..."})})}function v(){var e=Object(r.f)();return Object(c.useEffect)((function(){p.auth.loginWithCredential().finally((function(){e.push("/")}))}),[]),Object(m.jsx)(g,{})}function w(e){var t=e.network,n=e.user,a=e.fetchBalance,r=e.message,s=e.contract,i=e.fetchContractMessage,b=Object(c.useState)(""),j=Object(l.a)(b,2),d=j[0],h=j[1],f=Object(c.useState)(!1),p=Object(l.a)(f,2),O=p[0],x=p[1],g=Object(c.useState)(),v=Object(l.a)(g,2),w=v[0],k=v[1],C=Object(c.useRef)(),y=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return T(),e.next=5,s.methods.update(d).send({from:n.publicAddress});case 5:t=e.sent,k(t.transactionHash),N();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){k(),x(!0),C.current.innerText="Submitted..."},N=function(){x(!1),h(""),a(n.publicAddress),i(),C.current.innerText="Update"};return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:"Contract Message"}),Object(m.jsx)("div",{className:"info",children:r}),Object(m.jsx)("h1",{children:"Update Message"}),Object(m.jsx)("input",{type:"text",disabled:O,value:d,onChange:function(e){return h(e.target.value)},className:"full-width",placeholder:"New Message"}),Object(m.jsx)("button",{disabled:O,ref:C,onClick:y,children:"Update"}),w&&Object(m.jsxs)("div",{className:"info",children:[Object(m.jsx)("a",{href:"ethereum"===t?"https://ropsten.etherscan.io/tx/".concat(w):"https://explorer-mumbai.maticvigil.com/tx/".concat(w),target:"_blank",children:"View Transaction"})," \u2197\ufe0f"]})]})}function k(e){var t=e.web3,n=e.network,a=e.publicAddress,r=e.fetchBalance,s=Object(c.useState)(""),i=Object(l.a)(s,2),b=i[0],j=i[1],d=Object(c.useState)(""),h=Object(l.a)(d,2),f=h[0],p=h[1],O=Object(c.useState)(!1),x=Object(l.a)(O,2),g=x[0],v=x[1],w=Object(c.useState)(),k=Object(l.a)(w,2),C=k[0],y=k[1],T=Object(c.useRef)(),N=function(){var e=Object(o.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&f){e.next=2;break}return e.abrupt("return");case 2:return S(),e.next=5,t.eth.sendTransaction({from:a,to:b,value:t.utils.toWei(f)});case 5:n=e.sent,y(n.transactionHash),A();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){y(),v(!0),T.current.innerText="Submitted..."},A=function(){v(!1),j(""),p(""),r(a),T.current.innerText="Send Transaction"};return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:"Send Transaction"}),Object(m.jsx)("input",{type:"text",disabled:g,value:b,onChange:function(e){return j(e.target.value)},className:"full-width",placeholder:"To Address"}),Object(m.jsx)("input",{type:"text",disabled:g,value:f,onChange:function(e){return p(e.target.value)},className:"full-width",placeholder:"Amount"}),Object(m.jsx)("button",{disabled:g,ref:T,onClick:N,children:"Send Transaction"}),C&&Object(m.jsxs)("div",{className:"info",children:[Object(m.jsx)("a",{href:"ethereum"===n?"https://ropsten.etherscan.io/tx/".concat(C):"https://explorer-mumbai.maticvigil.com/tx/".concat(C),target:"_blank",children:"View Transaction"})," \u2197\ufe0f"]})]})}function C(e){var t=e.user,n=e.magic,a=e.handleChangeNetwork,s=e.balance,i=Object(r.f)(),u=Object(c.useCallback)((function(){n.user.logout().then((function(){i.push("/login")}))}),[i]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("h1",{children:["Current user: ",t.email]}),Object(m.jsx)("button",{onClick:u,children:"Logout"})]}),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:"Network"}),Object(m.jsx)("div",{className:"info",children:Object(m.jsxs)("select",{name:"network",onChange:function(e){return a(e)},children:[Object(m.jsx)("option",{value:"ethereum",children:"Ethereum (Ropsten Testnet)"}),Object(m.jsx)("option",{value:"matic",children:"Matic (Mumbai Testnet)"})]})}),Object(m.jsx)("h1",{children:"Public Address"}),Object(m.jsx)("div",{className:"info",children:t.publicAddress}),Object(m.jsx)("h1",{children:"Balance"}),Object(m.jsxs)("div",{className:"info",children:[s.toString().substring(0,6)," ","matic"===n.network?"MATIC":"ETH"]}),Object(m.jsx)("div",{children:Object(m.jsx)("a",{href:"https://faucet.ropsten.be/",target:"_blank",children:"Get Test ETH"})}),Object(m.jsx)("div",{children:Object(m.jsx)("a",{href:"https://faucet.matic.network/",target:"_blank",children:"Get Test MATIC"})})]})]})}var y=[{inputs:[],name:"message",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"newMessage",type:"string"}],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"}];function T(){var e=Object(c.useState)(p),t=Object(l.a)(e,2),n=t[0],a=t[1],s="ethereum"===n.network?O:f,i=Object(c.useState)(),u=Object(l.a)(i,2),o=u[0],b=u[1],j=Object(c.useState)("..."),d=Object(l.a)(j,2),x=d[0],v=d[1],T="ethereum"===n.network?"ethereum":"matic",N=new s.eth.Contract(y,"ethereum"===T?"0x3EA3913A352cDd49889c7b0dEc8Dd9491d063453":"0xfD827cC6d5b959287D7e1680dBA587ffE5dFcbB4"),S=Object(c.useState)("..."),A=Object(l.a)(S,2),M=A[0],E=A[1],B=Object(r.f)();Object(c.useEffect)((function(){n.user.isLoggedIn().then((function(e){e?n.user.getMetadata().then((function(e){b(e),_(e.publicAddress),D()})):B.push("/login")}))}),[n]);var _=function(e){s.eth.getBalance(e).then((function(e){return v(s.utils.fromWei(e))}))},D=function(){return N.methods.message().call().then(E)};return o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C,{handleChangeNetwork:function(e){"ethereum"===e.target.value?a(p):a(h),_(o.publicAddress),D()},balance:x,user:o,magic:n}),Object(m.jsx)(k,{web3:s,network:T,publicAddress:o.publicAddress,fetchBalance:_}),Object(m.jsx)(w,{network:T,contract:N,user:o,fetchBalance:_,message:M,fetchContractMessage:D})]}):Object(m.jsx)(g,{})}function N(){return Object(m.jsx)(s.a,{children:Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(r.c,{children:[Object(m.jsx)(r.a,{path:"/login",exact:!0,component:x}),Object(m.jsx)(r.a,{path:"/callback",exact:!0,component:v}),Object(m.jsx)(r.a,{path:"*",exact:!0,component:T})]})})})}n(518);Object(a.render)(Object(m.jsx)(N,{}),document.getElementById("root"))}},[[519,1,2]]]);
//# sourceMappingURL=main.9b8f42cc.chunk.js.map