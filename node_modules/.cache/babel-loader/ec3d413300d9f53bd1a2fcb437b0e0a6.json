{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tom/SNTCH-polygon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tom/SNTCH-polygon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tom/SNTCH-polygon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SendTransaction(_ref){var web3=_ref.web3,network=_ref.network,publicAddress=_ref.publicAddress,fetchBalance=_ref.fetchBalance;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),toAddress=_useState2[0],setToAddress=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),txnHash=_useState8[0],setTxnHash=_useState8[1];var sendTxBtnRef=useRef();var sendTransaction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var receipt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!toAddress||!amount)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:disableForm();_context.next=5;return web3.eth.sendTransaction({from:publicAddress,to:toAddress,value:web3.utils.toWei(amount)});case 5:receipt=_context.sent;setTxnHash(receipt.transactionHash);enableForm();case 8:case\"end\":return _context.stop();}}},_callee);}));return function sendTransaction(){return _ref2.apply(this,arguments);};}();// Disable input form while the transaction is being confirmed\nvar disableForm=function disableForm(){setTxnHash();setDisabled(true);sendTxBtnRef.current.innerText='Submitted...';};// Re-enable input form once the transaction is confirmed\nvar enableForm=function enableForm(){setDisabled(false);setToAddress('');setAmount('');fetchBalance(publicAddress);sendTxBtnRef.current.innerText='Send Transaction';};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Send Transaction\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:disabled,value:toAddress,onChange:function onChange(e){return setToAddress(e.target.value);},className:\"full-width\",placeholder:\"To Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:disabled,value:amount,onChange:function onChange(e){return setAmount(e.target.value);},className:\"full-width\",placeholder:\"Amount\"}),/*#__PURE__*/_jsx(\"button\",{disabled:disabled,ref:sendTxBtnRef,onClick:sendTransaction,children:\"Send Transaction\"}),txnHash&&/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"a\",{href:network===\"ethereum\"?\"https://ropsten.etherscan.io/tx/\".concat(txnHash):\"https://explorer-mumbai.maticvigil.com/tx/\".concat(txnHash),target:\"_blank\",children:\"View Transaction\"}),\" \\u2197\\uFE0F\"]})]});}","map":{"version":3,"sources":["/Users/tom/SNTCH-polygon/src/components/SendTransaction.js"],"names":["React","useState","useRef","SendTransaction","web3","network","publicAddress","fetchBalance","toAddress","setToAddress","amount","setAmount","disabled","setDisabled","txnHash","setTxnHash","sendTxBtnRef","sendTransaction","disableForm","eth","from","to","value","utils","toWei","receipt","transactionHash","enableForm","current","innerText","e","target"],"mappings":"0aAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,C,wFAEA,cAAe,SAASC,CAAAA,eAAT,MAAyE,IAA9CC,CAAAA,IAA8C,MAA9CA,IAA8C,CAAxCC,OAAwC,MAAxCA,OAAwC,CAA/BC,aAA+B,MAA/BA,aAA+B,CAAhBC,YAAgB,MAAhBA,YAAgB,eACpDN,QAAQ,CAAC,EAAD,CAD4C,wCAC/EO,SAD+E,eACpEC,YADoE,8BAE1DR,QAAQ,CAAC,EAAD,CAFkD,yCAE/ES,MAF+E,eAEvEC,SAFuE,8BAGtDV,QAAQ,CAAC,KAAD,CAH8C,yCAG/EW,QAH+E,eAGrEC,WAHqE,8BAIxDZ,QAAQ,EAJgD,yCAI/Ea,OAJ+E,eAItEC,UAJsE,eAMtF,GAAMC,CAAAA,YAAY,CAAGd,MAAM,EAA3B,CAEA,GAAMe,CAAAA,eAAe,2FAAG,oJAClB,CAACT,SAAD,EAAc,CAACE,MADG,kEAEtBQ,WAAW,GAFW,sBAGAd,CAAAA,IAAI,CAACe,GAAL,CAASF,eAAT,CAAyB,CAC7CG,IAAI,CAAEd,aADuC,CAE7Ce,EAAE,CAAEb,SAFyC,CAG7Cc,KAAK,CAAElB,IAAI,CAACmB,KAAL,CAAWC,KAAX,CAAiBd,MAAjB,CAHsC,CAAzB,CAHA,QAGhBe,OAHgB,eAQtBV,UAAU,CAACU,OAAO,CAACC,eAAT,CAAV,CACAC,UAAU,GATY,sDAAH,kBAAfV,CAAAA,eAAe,2CAArB,CAYC;AACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACzBH,UAAU,GACVF,WAAW,CAAC,IAAD,CAAX,CACAG,YAAY,CAACY,OAAb,CAAqBC,SAArB,CAAiC,cAAjC,CACD,CAJA,CAMD;AACA,GAAMF,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBd,WAAW,CAAC,KAAD,CAAX,CACAJ,YAAY,CAAC,EAAD,CAAZ,CACAE,SAAS,CAAC,EAAD,CAAT,CACAJ,YAAY,CAACD,aAAD,CAAZ,CACAU,YAAY,CAACY,OAAb,CAAqBC,SAArB,CAAiC,kBAAjC,CACD,CAND,CASA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACM,wCADN,cAEM,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAEjB,QAA7B,CAAuC,KAAK,CAAEJ,SAA9C,CAAyD,QAAQ,CAAE,kBAACsB,CAAD,QAAOrB,CAAAA,YAAY,CAACqB,CAAC,CAACC,MAAF,CAAST,KAAV,CAAnB,EAAnE,CAAwG,SAAS,CAAC,YAAlH,CAA+H,WAAW,CAAC,YAA3I,EAFN,cAGM,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAEV,QAA7B,CAAuC,KAAK,CAAEF,MAA9C,CAAsD,QAAQ,CAAE,kBAACoB,CAAD,QAAOnB,CAAAA,SAAS,CAACmB,CAAC,CAACC,MAAF,CAAST,KAAV,CAAhB,EAAhE,CAAkG,SAAS,CAAC,YAA5G,CAAyH,WAAW,CAAC,QAArI,EAHN,cAIM,eAAQ,QAAQ,CAAEV,QAAlB,CAA4B,GAAG,CAAEI,YAAjC,CAA+C,OAAO,CAAEC,eAAxD,8BAJN,CAMMH,OAAO,eACL,aAAK,SAAS,CAAC,MAAf,wBACE,UAAG,IAAI,CAAET,OAAO,GAAK,UAAZ,2CAA4DS,OAA5D,sDAAqHA,OAArH,CAAT,CAAyI,MAAM,CAAC,QAAhJ,8BADF,mBAPR,GADF,CAgBD","sourcesContent":["import React, { useState, useRef } from \"react\";\n\nexport default function SendTransaction({ web3, network, publicAddress, fetchBalance }) {\n  const [toAddress, setToAddress] = useState('');\n  const [amount, setAmount] = useState('');\n  const [disabled, setDisabled] = useState(false);\n  const [txnHash, setTxnHash] = useState();\n\n  const sendTxBtnRef = useRef();\n\n  const sendTransaction = async () => {\n    if (!toAddress || !amount) return;\n    disableForm()\n    const receipt = await web3.eth.sendTransaction({\n      from: publicAddress,\n      to: toAddress,\n      value: web3.utils.toWei(amount)\n    });\n    setTxnHash(receipt.transactionHash);\n    enableForm()\n  }\n\n   // Disable input form while the transaction is being confirmed\n   const disableForm = () => {\n    setTxnHash();\n    setDisabled(true);\n    sendTxBtnRef.current.innerText = 'Submitted...';\n  }\n\n  // Re-enable input form once the transaction is confirmed\n  const enableForm = () => {\n    setDisabled(false);\n    setToAddress('');\n    setAmount('');\n    fetchBalance(publicAddress);\n    sendTxBtnRef.current.innerText = 'Send Transaction';\n  }\n\n\n  return (\n    <div className=\"container\">\n          <h1>Send Transaction</h1>\n          <input type=\"text\" disabled={disabled} value={toAddress} onChange={(e) => setToAddress(e.target.value)} className=\"full-width\" placeholder=\"To Address\" />\n          <input type=\"text\" disabled={disabled} value={amount} onChange={(e) => setAmount(e.target.value)} className=\"full-width\" placeholder=\"Amount\" />\n          <button disabled={disabled} ref={sendTxBtnRef} onClick={sendTransaction}>Send Transaction</button>\n          {\n          txnHash &&\n            <div className=\"info\">\n              <a href={network === \"ethereum\" ? `https://ropsten.etherscan.io/tx/${txnHash}` : `https://explorer-mumbai.maticvigil.com/tx/${txnHash}`} target=\"_blank\">\n                View Transaction\n              </a> ↗️\n            </div>\n          }\n        </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}