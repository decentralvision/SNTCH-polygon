"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = detectFramework;

var _frameworks = _interopRequireDefault(require("./frameworks"));

var _Layer0PackageJson = _interopRequireDefault(require("../utils/Layer0PackageJson"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Detects the framework being used by the project in the current working
 * directory and installs the `layer0-*` library needed to build it for deployment
 * on Layer0, as well as `@layer0/core`.
 * @return {String} The command to run to build the app for deployment on Layer0.
 */
async function detectFramework() {
  const {
    dependencies = {},
    devDependencies = {}
  } = _Layer0PackageJson.default.loadPackageJson();

  const all = Object.keys(dependencies).concat(Object.keys(devDependencies));
  return _frameworks.default.find(entry => all.indexOf(entry.framework) !== -1);
}

module.exports = exports.default;