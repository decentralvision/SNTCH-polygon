var La=Object.create,Oe=Object.defineProperty,Ta=Object.getPrototypeOf,wn=Object.prototype.hasOwnProperty,Pa=Object.getOwnPropertyNames,ka=Object.getOwnPropertyDescriptor,En=Object.getOwnPropertySymbols,ja=Object.prototype.propertyIsEnumerable;var bn=(e,t,r)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))wn.call(t,r)&&bn(e,r,t[r]);if(En)for(var r of En(t))ja.call(t,r)&&bn(e,r,t[r]);return e},_n=e=>Oe(e,"__esModule",{value:!0});var A=(e,t)=>()=>(e&&(t=e(e=0)),t),h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),we=(e,t)=>{for(var r in t)Oe(e,r,{get:t[r],enumerable:!0})},Na=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Pa(t))!wn.call(e,n)&&n!=="default"&&Oe(e,n,{get:()=>t[n],enumerable:!(r=ka(t,n))||r.enumerable});return e},ie=e=>Na(_n(Oe(e!=null?La(Ta(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var zt=h(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.default=Aa;var Da=Ca(require("crypto"));function Ca(e){return e&&e.__esModule?e:{default:e}}var Qe=new Uint8Array(256),Xe=Qe.length;function Aa(){return Xe>Qe.length-16&&(Da.default.randomFillSync(Qe),Xe=0),Qe.slice(Xe,Xe+=16)}});var xn=h(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default=void 0;var Ia=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ze.default=Ia});var qe=h(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.default=void 0;var Ma=Fa(xn());function Fa(e){return e&&e.__esModule?e:{default:e}}function $a(e){return typeof e=="string"&&Ma.default.test(e)}var Ba=$a;et.default=Ba});var Re=h(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.default=void 0;var Wa=Ha(qe());function Ha(e){return e&&e.__esModule?e:{default:e}}var P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).substr(1));function za(e,t=0){let r=(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase();if(!(0,Wa.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Ua=za;tt.default=Ua});var Rn=h(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.default=void 0;var Ja=On(zt()),Va=On(Re());function On(e){return e&&e.__esModule?e:{default:e}}var qn,Ut,Jt=0,Vt=0;function Ya(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let s=e.node||qn,o=e.clockseq!==void 0?e.clockseq:Ut;if(s==null||o==null){let l=e.random||(e.rng||Ja.default)();s==null&&(s=qn=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=Ut=(l[6]<<8|l[7])&16383)}let u=e.msecs!==void 0?e.msecs:Date.now(),a=e.nsecs!==void 0?e.nsecs:Vt+1,d=u-Jt+(a-Vt)/1e4;if(d<0&&e.clockseq===void 0&&(o=o+1&16383),(d<0||u>Jt)&&e.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Jt=u,Vt=a,Ut=o,u+=122192928e5;let c=((u&268435455)*1e4+a)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let f=u/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let l=0;l<6;++l)i[n+l]=s[l];return t||(0,Va.default)(i)}var Ga=Ya;rt.default=Ga});var Yt=h(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.default=void 0;var Qa=Ka(qe());function Ka(e){return e&&e.__esModule?e:{default:e}}function Xa(e){if(!(0,Qa.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Za=Xa;nt.default=Za});var Gt=h(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.default=ec;de.URL=de.DNS=void 0;var tc=Ln(Re()),rc=Ln(Yt());function Ln(e){return e&&e.__esModule?e:{default:e}}function nc(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Tn="6ba7b810-9dad-11d1-80b4-00c04fd430c8";de.DNS=Tn;var Pn="6ba7b811-9dad-11d1-80b4-00c04fd430c8";de.URL=Pn;function ec(e,t,r){function n(i,s,o,u){if(typeof i=="string"&&(i=nc(i)),typeof s=="string"&&(s=(0,rc.default)(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+i.length);if(a.set(s),a.set(i,s.length),a=r(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,o){u=u||0;for(let d=0;d<16;++d)o[u+d]=a[d];return o}return(0,tc.default)(a)}try{n.name=e}catch(i){}return n.DNS=Tn,n.URL=Pn,n}});var kn=h(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.default=void 0;var sc=ic(require("crypto"));function ic(e){return e&&e.__esModule?e:{default:e}}function oc(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),sc.default.createHash("md5").update(e).digest()}var uc=oc;it.default=uc});var Nn=h(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.default=void 0;var ac=jn(Gt()),cc=jn(kn());function jn(e){return e&&e.__esModule?e:{default:e}}var lc=(0,ac.default)("v3",48,cc.default),fc=lc;st.default=fc});var Cn=h(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.default=void 0;var dc=An(zt()),mc=An(Re());function An(e){return e&&e.__esModule?e:{default:e}}function yc(e,t,r){e=e||{};let n=e.random||(e.rng||dc.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,mc.default)(n)}var hc=yc;ot.default=hc});var Dn=h(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.default=void 0;var gc=pc(require("crypto"));function pc(e){return e&&e.__esModule?e:{default:e}}function vc(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),gc.default.createHash("sha1").update(e).digest()}var Sc=vc;ut.default=Sc});var Fn=h(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.default=void 0;var wc=In(Gt()),Ec=In(Dn());function In(e){return e&&e.__esModule?e:{default:e}}var bc=(0,wc.default)("v5",80,Ec.default),_c=bc;at.default=_c});var Mn=h(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.default=void 0;var xc="00000000-0000-0000-0000-000000000000";ct.default=xc});var $n=h(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.default=void 0;var qc=Oc(qe());function Oc(e){return e&&e.__esModule?e:{default:e}}function Rc(e){if(!(0,qc.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Lc=Rc;lt.default=Lc});var Bn=h(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Object.defineProperty(Y,"v1",{enumerable:!0,get:function(){return Tc.default}});Object.defineProperty(Y,"v3",{enumerable:!0,get:function(){return Pc.default}});Object.defineProperty(Y,"v4",{enumerable:!0,get:function(){return kc.default}});Object.defineProperty(Y,"v5",{enumerable:!0,get:function(){return jc.default}});Object.defineProperty(Y,"NIL",{enumerable:!0,get:function(){return Nc.default}});Object.defineProperty(Y,"version",{enumerable:!0,get:function(){return Ac.default}});Object.defineProperty(Y,"validate",{enumerable:!0,get:function(){return Cc.default}});Object.defineProperty(Y,"stringify",{enumerable:!0,get:function(){return Dc.default}});Object.defineProperty(Y,"parse",{enumerable:!0,get:function(){return Ic.default}});var Tc=se(Rn()),Pc=se(Nn()),kc=se(Cn()),jc=se(Fn()),Nc=se(Mn()),Ac=se($n()),Cc=se(qe()),Dc=se(Re()),Ic=se(Yt());function se(e){return e&&e.__esModule?e:{default:e}}});var K,xp,Op,ft,qp,Rp,Lp,Tp,Pp,kp,Kt=A(()=>{K=ie(Bn()),xp=K.default.v1,Op=K.default.v3,ft=K.default.v4,qp=K.default.v5,Rp=K.default.NIL,Lp=K.default.version,Tp=K.default.validate,Pp=K.default.stringify,kp=K.default.parse});var Hn={};we(Hn,{LambdaInvocation:()=>dt,default:()=>Fc});var Qt,Fc,dt,Xt=A(()=>{Kt();Qt=class{constructor(){this._id=ft().toString();this._spawnedAt=Date.now();this._invocationCounter=0;this._lifetimeDuration=0}get id(){return this._id}get age(){return Date.now()-this._spawnedAt}get invocationCounter(){return this._invocationCounter}get lifetimeDuration(){return this._lifetimeDuration}startInvocation(){++this._invocationCounter}stopInvocation(t){this._lifetimeDuration+=t}},Fc=Qt,dt=class{constructor(t){this._startTime=Date.now();this._isRunning=!1;this._lambda=t,this._stopTime=this._startTime}get lambda(){return this._lambda}get duration(){return this._stopTime-this._startTime}start(){this._isRunning||(this._isRunning=!0,this._lambda.startInvocation())}stop(){this._isRunning&&(this._isRunning=!1,this._stopTime=Date.now(),this._lambda.stopInvocation(this.duration))}}});var Jn=h((Np,Wn)=>{"use strict";Wn.exports=zn;var{toString:Mc}=Object.prototype,Zt=Symbol("circular-ref-tag"),er=Symbol("pino-raw-err-ref"),Un=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[er]},set:function(e){this[er]=e}}});Object.defineProperty(Un,er,{writable:!0,value:{}});function zn(e){if(!(e instanceof Error))return e;e[Zt]=void 0;let t=Object.create(Un);t.type=Mc.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack;for(let r in e)if(t[r]===void 0){let n=e[r];n instanceof Error?n.hasOwnProperty(Zt)||(t[r]=zn(n)):t[r]=n}return delete e[Zt],t.raw=e,t}});var Kn=h((Ap,Vn)=>{"use strict";Vn.exports={mapHttpRequest:$c,reqSerializer:Yn};var tr=Symbol("pino-raw-req-ref"),Gn=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[tr]},set:function(e){this[tr]=e}}});Object.defineProperty(Gn,tr,{writable:!0,value:{}});function Yn(e){let t=e.info||e.socket,r=Object.create(Gn);return r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?(r.url=e.originalUrl,r.query=e.query,r.params=e.params):r.url=e.path||(e.url?e.url.path||e.url:void 0),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function $c(e){return{req:Yn(e)}}});var ei=h((Cp,Qn)=>{"use strict";Qn.exports={mapHttpResponse:Bc,resSerializer:Xn};var rr=Symbol("pino-raw-res-ref"),Zn=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[rr]},set:function(e){this[rr]=e}}});Object.defineProperty(Zn,rr,{writable:!0,value:{}});function Xn(e){let t=Object.create(Zn);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function Bc(e){return{res:Xn(e)}}});var ir=h((Dp,ti)=>{"use strict";var nr=Jn(),mt=Kn(),yt=ei();ti.exports={err:nr,mapHttpRequest:mt.mapHttpRequest,mapHttpResponse:yt.mapHttpResponse,req:mt.reqSerializer,res:yt.resSerializer,wrapErrorSerializer:function(t){return t===nr?t:function(n){return t(nr(n))}},wrapRequestSerializer:function(t){return t===mt.reqSerializer?t:function(n){return t(mt.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===yt.resSerializer?t:function(n){return t(yt.resSerializer(n))}}}});var ni=h((Ip,ri)=>{"use strict";var{createContext:Hc,runInContext:Wc}=require("vm");ri.exports=zc;function zc(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(s=>{if(typeof s!="string")throw Error(t());try{if(/ã€‡/.test(s))throw Error();let o=new Proxy({},{get:()=>o,set:()=>{throw Error()}}),u=(s[0]==="["?"":".")+s.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(u)||/\/\*/.test(u))throw Error();Wc(`
          (function () {
            'use strict'
            o${u}
            if ([o${u}].length !== 1) throw Error()
          })()
        `,Hc({o,\u3007:null}),{codeGeneration:{strings:!1,wasm:!1}})}catch(o){throw Error(r(s))}})}}});var ht=h((Fp,ii)=>{"use strict";ii.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var oi=h((Mp,si)=>{"use strict";var Uc=ht();si.exports=Jc;function Jc({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,s,o){var u=s.match(Uc).map(c=>c.replace(/'|"|`/g,""));let a=s[0]==="[";u=u.map(c=>c[0]==="["?c.substr(1,c.length-2):c);let d=u.indexOf("*");if(d>-1){let c=u.slice(0,d),f=c.join("."),l=u.slice(d+1,u.length);if(l.indexOf("*")>-1)throw Error("fast-redact \u2013 Only one wildcard per path is supported");let y=l.length>0;r++,t.push({before:c,beforeStr:f,after:l,nested:y})}else i[s]={path:u,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(s),leadingBracket:a};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var ai=h(($p,ui)=>{"use strict";var Vc=ht();ui.exports=Yc;function Yc({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:s},o){let u=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${Xc(n,t)}
    }
    const { censor, secret } = this
    ${Gc(e,i,s)}
    this.compileRestore()
    ${Kc(r>0,i,s)}
    ${Qc(t)}
  `).bind(o);return t===!1&&(u.restore=a=>o.restore(a)),u}function Gc(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:s,path:o}=e[n],u=s?1:0,a=s?"":".",d=[];for(var c;(c=Vc.exec(n))!==null;){let[,m]=c,{index:p,input:v}=c;p>u&&d.push(v.substring(0,p-(m?0:1)))}var f=d.map(m=>`o${a}${m}`).join(" && ");f.length===0?f+=`o${a}${n} != null`:f+=` && o${a}${n} != null`;let l=`
      switch (true) {
        ${d.reverse().map(m=>`
          case o${a}${m} === censor:
            secret[${i}].circle = ${JSON.stringify(m)}
            break
        `).join(`
`)}
      }
    `,y=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${f}) {
        const val = o${a}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${a}${n} = ${t?`censor(${y})`:"censor"}
          ${l}
        }
      }
    `}).join(`
`)}function Kc(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function Qc(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function Xc(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var sr=h((Bp,ci)=>{"use strict";ci.exports={groupRedact:el,groupRestore:Zc,nestedRedact:rl,nestedRestore:tl};function Zc({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let s=e[i];r[s]=t[i]}}function el(e,t,r,n,i){let s=li(e,t);if(s==null)return{keys:null,values:null,target:null,flat:!0};let o=Object.keys(s),u=o.length,a=t.length,d=i?[...t]:void 0,c=new Array(u);for(var f=0;f<u;f++){let l=o[f];c[f]=s[l],i?(d[a]=l,s[l]=r(s[l],d)):n?s[l]=r(s[l]):s[l]=r}return{keys:o,values:c,target:s,flat:!0}}function tl(e){let t=e.length;for(var r=0;r<t;r++){let{key:n,target:i,value:s}=e[r];i[n]=s}}function rl(e,t,r,n,i,s,o){let u=li(t,r);if(u==null)return;let a=Object.keys(u),d=a.length;for(var c=0;c<d;c++){let f=a[c],{value:l,parent:y,exists:m}=nl(u,f,r,n,i,s,o);m===!0&&y!==null&&e.push({key:n[n.length-1],target:y,value:l})}return e}function il(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nl(e,t,r,n,i,s,o){let u=n.length,a=u-1,d=t;var c=-1,f,l,y,m=null,p=!0;if(y=f=e[t],typeof f!="object")return{value:null,parent:null,exists:p};for(;f!=null&&++c<u;){if(t=n[c],m=y,!(t in f)){p=!1;break}if(y=f[t],l=c!==a?y:s?o?i(y,[...r,d,...n]):i(y):i,f[t]=il(f,t)&&l===y||l===void 0&&i!==void 0?f[t]:l,f=f[t],typeof f!="object")break}return{value:y,parent:m,exists:p}}function li(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}});var di=h((Hp,fi)=>{"use strict";var{groupRestore:sl,nestedRestore:ol}=sr();fi.exports=ul;function ul({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e).filter(u=>e[u].precensored===!1),i=al(e,n),s=t>0,o=s?{secret:e,groupRestore:sl,nestedRestore:ol}:{secret:e};this.restore=Function("o",cl(i,n,s)).bind(o)}}function al(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:s}=e[r],u=n?`o.${n} = secret[${i}].val`:`o${s?"":"."}${r} = secret[${i}].val`,a=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${u} } catch (e) {}
        ${a}
      }
    `}).join("")}function cl(e,t,r){let n=r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = ${t.length}; i < len; i++) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:"";return`
    const secret = this.secret
    ${e}
    ${n}
    return o
  `}});var yi=h((Wp,mi)=>{"use strict";mi.exports=ll;function ll(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:s,nestedRedact:o,wildcards:u,wcLen:a}=e,d=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&d.push({serialize:i}),a>0&&d.push({groupRedact:s,nestedRedact:o,wildcards:u,wcLen:a}),Object.assign(...d)}});var gi=h((zp,hi)=>{"use strict";var pi=ni(),fl=oi(),dl=ai(),ml=di(),{groupRedact:yl,nestedRedact:hl}=sr(),pl=yi(),gl=ht(),vl=pi(),or=e=>e;or.restore=or;var Sl="[REDACTED]";ur.rx=gl;ur.validator=pi;hi.exports=ur;function ur(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:Sl,s=typeof i=="function",o=s&&i.length>1;if(t.length===0)return r||or;vl({paths:t,serialize:r,censor:i});let{wildcards:u,wcLen:a,secret:d}=fl({paths:t,censor:i}),c=ml({secret:d,wcLen:a}),f="strict"in e?e.strict:!0;return dl({secret:d,wcLen:a,serialize:r,strict:f,isCensorFct:s,censorFctTakesPath:o},pl({secret:d,censor:i,compileRestore:c,serialize:r,groupRedact:yl,nestedRedact:hl,wildcards:u,wcLen:a}))}});var Ee=h((Up,vi)=>{"use strict";var wl=Symbol("pino.setLevel"),El=Symbol("pino.getLevel"),bl=Symbol("pino.levelVal"),_l=Symbol("pino.useLevelLabels"),xl=Symbol("pino.useOnlyCustomLevels"),Ol=Symbol("pino.mixin"),ql=Symbol("pino.lsCache"),Rl=Symbol("pino.chindings"),Ll=Symbol("pino.parsedChindings"),Tl=Symbol("pino.asJson"),Pl=Symbol("pino.write"),kl=Symbol("pino.redactFmt"),jl=Symbol("pino.time"),Nl=Symbol("pino.timeSliceIndex"),Al=Symbol("pino.stream"),Cl=Symbol("pino.stringify"),Dl=Symbol("pino.stringifiers"),Il=Symbol("pino.end"),Fl=Symbol("pino.formatOpts"),Ml=Symbol("pino.messageKey"),$l=Symbol("pino.nestedKey"),Bl=Symbol("pino.wildcardFirst"),Hl=Symbol.for("pino.serializers"),Wl=Symbol.for("pino.formatters"),zl=Symbol.for("pino.hooks"),Ul=Symbol.for("pino.metadata");vi.exports={setLevelSym:wl,getLevelSym:El,levelValSym:bl,useLevelLabelsSym:_l,mixinSym:Ol,lsCacheSym:ql,chindingsSym:Rl,parsedChindingsSym:Ll,asJsonSym:Tl,writeSym:Pl,serializersSym:Hl,redactFmtSym:kl,timeSym:jl,timeSliceIndexSym:Nl,streamSym:Al,stringifySym:Cl,stringifiersSym:Dl,endSym:Il,formatOptsSym:Fl,messageKeySym:Ml,nestedKeySym:$l,wildcardFirstSym:Bl,needsMetadataGsym:Ul,useOnlyCustomLevelsSym:xl,formattersSym:Wl,hooksSym:zl}});var _i=h((Jp,Si)=>{"use strict";var ar=gi(),{redactFmtSym:Jl,wildcardFirstSym:pt}=Ee(),{rx:cr,validator:Vl}=ar,wi=Vl({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),Ei="[Redacted]",bi=!1;function Gl(e,t){let{paths:r,censor:n}=Yl(e),i=r.reduce((u,a)=>{cr.lastIndex=0;let d=cr.exec(a),c=cr.exec(a),f=d[1]!==void 0?d[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):d[0];if(f==="*"&&(f=pt),c===null)return u[f]=null,u;if(u[f]===null)return u;let{index:l}=c,y=`${a.substr(l,a.length-1)}`;return u[f]=u[f]||[],f!==pt&&u[f].length===0&&u[f].push(...u[pt]||[]),f===pt&&Object.keys(u).forEach(function(m){u[m]&&u[m].push(y)}),u[f].push(y),u},{}),s={[Jl]:ar({paths:r,censor:n,serialize:t,strict:bi})},o=(...u)=>typeof n=="function"?t(n(...u)):t(n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((u,a)=>{if(i[a]===null)u[a]=d=>o(d,[a]);else{let d=typeof n=="function"?(c,f)=>n(c,[a,...f]):n;u[a]=ar({paths:i[a],censor:d,serialize:t,strict:bi})}return u},s)}function Yl(e){if(Array.isArray(e))return e={paths:e,censor:Ei},wi(e),e;let{paths:t,censor:r=Ei,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),wi({paths:t,censor:r}),{paths:t,censor:r}}Si.exports=Gl});var Oi=h((Vp,xi)=>{"use strict";var Kl=()=>"",Ql=()=>`,"time":${Date.now()}`,Xl=()=>`,"time":${Math.round(Date.now()/1e3)}`,Zl=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;xi.exports={nullTime:Kl,epochTime:Ql,unixTime:Xl,isoTime:Zl}});var gt=h((Yp,qi)=>{"use strict";function ef(e){return e|0,e}qi.exports=ef});var Ri=h((Gp,lr)=>{"use strict";if(typeof SharedArrayBuffer!="undefined"&&typeof Atomics!="undefined"){let t=function(r){if((r>0&&r<Infinity)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));lr.exports=t}else{let e=function(t){if((t>0&&t<Infinity)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};lr.exports=e}});var mr=h((Kp,Li)=>{"use strict";var Q=require("fs"),tf=require("events"),rf=gt(),nf=require("util").inherits,fr=100,Ti=Ri(),dr=16*1024*1024;function Pi(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(n,i){if(n){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",n)}):t.emit("error",n);return}if(t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),t._reopening)return;let s=t._buf.length;s>0&&s>t.minLength&&!t.destroyed&&be(t)}if(t.sync)try{let n=Q.openSync(e,"a");r(null,n)}catch(n){throw r(n),n}else Q.open(e,"a",r)}function X(e){if(!(this instanceof X))return new X(e);let{fd:t,dest:r,minLength:n,sync:i}=e||{};if(t=t||r,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=i||!1,this.minLength=n||0,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Pi(t,this);else throw new Error("SonicBoom supports only file descriptors and files");this.release=(s,o)=>{if(s){if(s.code==="EAGAIN")if(this.sync)try{Ti(fr),this.release(void 0,0)}catch(a){this.release(a)}else setTimeout(()=>{Q.write(this.fd,this._writingBuf,"utf8",this.release)},fr);else this._buf=this._writingBuf+this._buf,this._writingBuf="",this._writing=!1,this.emit("error",s);return}if(this._writingBuf.length!==o)if(this._writingBuf=this._writingBuf.slice(o),this.sync)try{do o=Q.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(o);while(this._writingBuf.length!==0)}catch(a){this.release(a);return}else{Q.write(this.fd,this._writingBuf,"utf8",this.release);return}if(this._writingBuf="",this.destroyed)return;let u=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):u>0&&u>this.minLength?be(this):this._ending?u>0?be(this):(this._writing=!1,vt(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(sf,this)):this.emit("drain"))},this.on("newListener",function(s){s==="drain"&&(this._asyncDrainScheduled=!1)})}function sf(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}nf(X,tf);X.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=e;let t=this._buf.length;return!this._writing&&t>this.minLength&&be(this),t<16384};X.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||be(this)};X.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&Q.close(t,r=>{if(r)return this.emit("error",r)})}),Pi(e||this.file,this)};X.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}if(!this._ending){if(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0){be(this);return}this._writing||vt(this)}};X.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(;this._buf.length>0;)try{Q.writeSync(this.fd,this._buf,"utf8"),this._buf=""}catch(e){if(e.code!=="EAGAIN")throw e;Ti(fr)}};X.prototype.destroy=function(){this.destroyed||vt(this)};function be(e){e._writing=!0;let t=e._buf,r=e.release;if(t.length>dr?(t=t.slice(0,dr),e._buf=e._buf.slice(dr)):e._buf="",rf(t),e._writingBuf=t,e.sync)try{let n=Q.writeSync(e.fd,t,"utf8");r(null,n)}catch(n){r(n)}else Q.write(e.fd,t,"utf8",r)}function vt(e){if(e.fd===-1){e.once("ready",vt.bind(null,e));return}Q.close(e.fd,t=>{if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}),e.destroyed=!0,e._buf=""}Li.exports=X});var ji=h((Qp,ki)=>{"use strict";function of(e){try{return JSON.stringify(e)}catch(t){return'"[Circular]"'}}ki.exports=uf;function uf(e,t,r){var n=r&&r.stringify||of,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var o=new Array(s);o[0]=n(e);for(var u=1;u<s;u++)o[u]=n(t[u]);return o.join(" ")}if(typeof e!="string")return e;var a=t.length;if(a===0)return e;for(var d="",c="",f=1-i,l=-1,y=e&&e.length||0,m=0;m<y;){if(e.charCodeAt(m)===37&&m+1<y){switch(l=l>-1?l:0,e.charCodeAt(m+1)){case 100:if(f>=a||(l<m&&(c+=e.slice(l,m)),t[f]==null))break;c+=Number(t[f]),l=m=m+2;break;case 79:case 111:case 106:if(f>=a||(l<m&&(c+=e.slice(l,m)),t[f]===void 0))break;var p=typeof t[f];if(p==="string"){c+="'"+t[f]+"'",l=m+2,m++;break}if(p==="function"){c+=t[f].name||"<anonymous>",l=m+2,m++;break}c+=n(t[f]),l=m+2,m++;break;case 115:if(f>=a)break;l<m&&(c+=e.slice(l,m)),c+=String(t[f]),l=m+2,m++;break;case 37:l<m&&(c+=e.slice(l,m)),c+="%",l=m+2,m++;break}++f}++m}return l===-1?e:(l<y&&(c+=e.slice(l)),c)}});var Di=h((Xp,Ni)=>{Ni.exports=Le;Le.default=Le;Le.stable=Ai;Le.stableStringify=Ai;var oe=[],ae=[];function Le(e,t,r){yr(e,"",[],void 0);var n;for(ae.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,Ci(t),r);oe.length!==0;){var i=oe.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function yr(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var s=Object.getOwnPropertyDescriptor(n,t);s.get!==void 0?s.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),oe.push([n,t,e,s])):ae.push([e,t]):(n[t]="[Circular]",oe.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)yr(e[i],i,r,e);else{var o=Object.keys(e);for(i=0;i<o.length;i++){var u=o[i];yr(e[u],u,r,e)}}r.pop()}}function af(e,t){return e<t?-1:e>t?1:0}function Ai(e,t,r){var n=hr(e,"",[],void 0)||e,i;for(ae.length===0?i=JSON.stringify(n,t,r):i=JSON.stringify(n,Ci(t),r);oe.length!==0;){var s=oe.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return i}function hr(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var s=Object.getOwnPropertyDescriptor(n,t);s.get!==void 0?s.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),oe.push([n,t,e,s])):ae.push([e,t]):(n[t]="[Circular]",oe.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)hr(e[i],i,r,e);else{var o={},u=Object.keys(e).sort(af);for(i=0;i<u.length;i++){var a=u[i];hr(e[a],a,r,e),o[a]=e[a]}if(n!==void 0)oe.push([n,t,e]),n[t]=o;else return o}r.pop()}}function Ci(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(ae.length>0)for(var n=0;n<ae.length;n++){var i=ae[n];if(i[1]===t&&i[0]===r){r="[Circular]",ae.splice(n,1);break}}return e.call(this,t,r)}}});var wt=h((Zp,Ii)=>{"use strict";var Fi=ji(),{mapHttpRequest:cf,mapHttpResponse:lf}=ir(),Mi=mr(),ff=Di(),{lsCacheSym:df,chindingsSym:pr,parsedChindingsSym:gr,writeSym:$i,serializersSym:vr,formatOptsSym:Bi,endSym:mf,stringifiersSym:Sr,stringifySym:Hi,wildcardFirstSym:Wi,needsMetadataGsym:zi,redactFmtSym:yf,streamSym:hf,nestedKeySym:Ui,formattersSym:wr,messageKeySym:Ji}=Ee();function Te(){}function pf(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=cf(n):typeof n.setHeader=="function"&&(n=lf(n))),this[Ui]&&(n={[this[Ui]]:n});let o;s===null&&i.length===0?o=[null]:(s=i.shift(),o=i),this[$i](n,Fi(s,o,this[Bi]),e)}else this[$i](null,Fi(n,i,this[Bi]),e)}}function gf(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var o=0;o<s&&i>=32;o++)i=e.charCodeAt(o),(i===34||i===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function vf(e,t,r,n){let i=this[Hi],s=this[Sr],o=this[mf],u=this[pr],a=this[vr],d=this[wr],c=this[Ji],f=this[df][r]+n;f=f+u;let l,y=e.hasOwnProperty===void 0;d.log&&(e=d.log(e)),t!==void 0&&(e[c]=t);let m=s[Wi];for(let p in e)if(l=e[p],(y||e.hasOwnProperty(p))&&l!==void 0){l=a[p]?a[p](l):l;let v=s[p]||m;switch(typeof l){case"undefined":case"function":continue;case"number":Number.isFinite(l)===!1&&(l=null);case"boolean":v&&(l=v(l));break;case"string":l=(v||gf)(l);break;default:l=(v||i)(l)}if(l===void 0)continue;f+=',"'+p+'":'+l}return f+o}function Sf(e,t){let r,n=e[pr],i=e[Hi],s=e[Sr],o=s[Wi],u=e[vr];t=e[wr].bindings(t);for(let d in t)if(r=t[d],(d!=="level"&&d!=="serializers"&&d!=="formatters"&&d!=="customLevels"&&t.hasOwnProperty(d)&&r!==void 0)===!0){if(r=u[d]?u[d](r):r,r=(s[d]||o||i)(r),r===void 0)continue;n+=',"'+d+'":'+r}return n}function Vi(e,t,r,n){if(t&&typeof t=="function")return t=t.bind(n),Er(t(e),r,e);try{let i=require("pino-pretty");return i.asMetaWrapper=Er,Er(i(e),r,e)}catch(i){throw Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately")}}function Er(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);let n=!1;return{[zi]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||n||(n=!0,Yi(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let i=this.lastLogger,s=null;return i?(i.hasOwnProperty(gr)?s=i[gr]:(s=JSON.parse("{"+i[pr].substr(1)+"}"),i[gr]=s),s):null},write(i){let s=this.lastLogger,o=this.chindings(),u=this.lastTime;u.match(/^\d+/)?u=parseInt(u):u=u.slice(1,-1);let a=this.lastObj,d=this.lastMsg,c=null,f=s[wr],l=f.log?f.log(a):a,y=s[Ji];d&&l&&!l.hasOwnProperty(y)&&(l[y]=d);let m=Object.assign({level:this.lastLevel,time:u},l,c),p=s[vr],v=Object.keys(p);for(var S=0;S<v.length;S++){let x=v[S];m[x]!==void 0&&(m[x]=p[x](m[x]))}for(let x in o)m.hasOwnProperty(x)||(m[x]=o[x]);let B=s[Sr][yf],ne=e(typeof B=="function"?B(m):m);ne!==void 0&&(Yi(t,this),t.write(ne))}}}function wf(e){return e.write!==e.constructor.prototype.write}function St(e){let t=new Mi(e);return t.on("error",r),t;function r(n){if(n.code==="EPIPE"){t.write=Te,t.end=Te,t.flushSync=Te,t.destroy=Te;return}t.removeListener("error",r),t.emit("error",n)}}function Ef(e){return function(r,n={},i){if(typeof n=="string"?(i=St({dest:n,sync:!0}),n={}):typeof i=="string"?i=St({dest:i,sync:!0}):(n instanceof Mi||n.writable||n._writableState)&&(i=n,n=null),n=Object.assign({},e,n),"extreme"in n)throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in n)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in n&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),n.levelKey=n.changeLevelName,delete n.changeLevelName);let{enabled:s,prettyPrint:o,prettifier:u,messageKey:a}=n;if(s===!1&&(n.level="silent"),i=i||process.stdout,i===process.stdout&&i.fd>=0&&!wf(i)&&(i=St({fd:i.fd,sync:!0})),o){let d=Object.assign({messageKey:a},o);i=Vi(d,u,i,r)}return{opts:n,stream:i}}}function bf(e,t){if(typeof e=="undefined"||typeof e.child!="function")throw Error("expected a pino logger instance");let r=typeof t!="undefined";if(r&&typeof t!="function")throw Error("if supplied, the handler parameter should be a function");let n=e[hf];if(typeof n.flushSync!="function")throw Error("final requires a stream that has a flushSync method, such as pino.destination");let i=new Proxy(e,{get:(s,o)=>o in s.levels.values?(...u)=>{s[o](...u),n.flushSync()}:s[o]});return r?(s=null,...o)=>{try{n.flushSync()}catch(u){}return t(s,i,...o)}:i}function _f(e){try{return JSON.stringify(e)}catch(t){return ff(e)}}function xf(e,t,r){return{level:e,bindings:t,log:r}}function Yi(e,t){e[zi]===!0&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}Ii.exports={noop:Te,buildSafeSonicBoom:St,getPrettyStream:Vi,asChindings:Sf,asJson:vf,genLog:pf,createArgsNormalizer:Ef,final:bf,stringify:_f,buildFormatters:xf}});var xr=h((eg,Gi)=>{"use strict";var Of=gt(),{lsCacheSym:qf,levelValSym:br,useOnlyCustomLevelsSym:Rf,streamSym:Lf,formattersSym:Tf,hooksSym:Pf}=Ee(),{noop:kf,genLog:me}=wt(),Z={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},Ki={fatal:e=>{let t=me(Z.fatal,e);return function(...r){let n=this[Lf];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch(i){}}},error:e=>me(Z.error,e),warn:e=>me(Z.warn,e),info:e=>me(Z.info,e),debug:e=>me(Z.debug,e),trace:e=>me(Z.trace,e)},_r=Object.keys(Z).reduce((e,t)=>(e[Z[t]]=t,e),{}),jf=Object.keys(_r).reduce((e,t)=>(e[t]=Of('{"level":'+Number(t)),e),{});function Nf(e){let t=e[Tf].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1)}return e[qf]=n,e}function Af(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Cf(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[br],i=this[br]=r[e],s=this[Rf],o=this[Pf].logMethod;for(let u in r){if(i>r[u]){this[u]=kf;continue}this[u]=Af(u,s)?Ki[u](o):me(r[u],o)}this.emit("level-change",e,i,t[n],n)}function Df(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function If(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[br]}function Ff(e=null,t=!1){let r=e?Object.keys(e).reduce((s,o)=>(s[e[o]]=o,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:_r,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:Infinity}}),t?null:Z,e);return{labels:n,values:i}}function Mf(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(_r).map(s=>+s),Infinity).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:Infinity}}),r?null:Z,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function $f(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}Gi.exports={initialLsCache:jf,genLsCache:Nf,levelMethods:Ki,getLevel:Df,setLevel:Cf,isLevelEnabled:If,mappings:Ff,assertNoLevelCollisions:$f,assertDefaultLevelFound:Mf}});var Xi=h((tg,Qi)=>{Qi.exports={name:"pino",version:"6.11.2",description:"super fast, all natural json logger",main:"pino.js",browser:"./browser.js",files:["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],scripts:{docs:"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js",lint:"eslint .",test:"npm run lint && tap --100 test/*test.js test/*/*test.js","test-ci":"npm run lint && tap test/*test.js test/*/*test.js --coverage-report=lcovonly","cov-ui":"tap --coverage-report=html test/*test.js test/*/*test.js",bench:"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},bin:{pino:"./bin.js"},precommit:"test",repository:{type:"git",url:"git+https://github.com/pinojs/pino.git"},keywords:["fast","logger","stream","json"],author:"Matteo Collina <hello@matteocollina.com>",contributors:["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],license:"MIT",bugs:{url:"https://github.com/pinojs/pino/issues"},homepage:"http://getpino.io",devDependencies:{airtap:"4.0.3",benchmark:"^2.1.4",bole:"^4.0.0",bunyan:"^1.8.14","docsify-cli":"^4.4.1",eslint:"^7.17.0","eslint-config-standard":"^16.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1",execa:"^5.0.0",fastbench:"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1",log:"^6.0.0",loglevel:"^1.6.7","pino-pretty":"^4.1.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3",pump:"^3.0.0",semver:"^7.0.0",split2:"^3.1.1",steed:"^1.1.3","strip-ansi":"^6.0.0",tap:"^14.10.8",tape:"^5.0.0",through2:"^4.0.0",winston:"^3.3.3"},dependencies:{"fast-redact":"^3.0.0","fast-safe-stringify":"^2.0.7",flatstr:"^1.0.12","pino-std-serializers":"^3.1.0","quick-format-unescaped":"4.0.1","sonic-boom":"^1.0.2"},_resolved:"https://registry.npmjs.org/pino/-/pino-6.11.2.tgz",_integrity:"sha512-bmzxwbrIPxQUlAuMkF4PWVErUGERU4z37HazlhflKFg08crsNE3fACGN6gPwg5xtKOK47Ux5cZm8YCuLV4wWJg==",_from:"pino@6.11.2"}});var Or=h((rg,Zi)=>{"use strict";var{version:Bf}=Xi();Zi.exports={version:Bf}});var as=h((ig,es)=>{"use strict";var{EventEmitter:Hf}=require("events"),Wf=mr(),zf=gt(),{lsCacheSym:Uf,levelValSym:Jf,setLevelSym:qr,getLevelSym:ts,chindingsSym:Rr,parsedChindingsSym:Vf,mixinSym:Yf,asJsonSym:rs,writeSym:Gf,timeSym:Kf,timeSliceIndexSym:Qf,streamSym:ns,serializersSym:ye,formattersSym:Lr,useOnlyCustomLevelsSym:Xf,needsMetadataGsym:Zf}=Ee(),{getLevel:ed,setLevel:td,isLevelEnabled:rd,mappings:nd,initialLsCache:id,genLsCache:sd,assertNoLevelCollisions:od}=xr(),{asChindings:is,asJson:ud,buildFormatters:ss}=wt(),{version:ad}=Or(),cd=class{},os={constructor:cd,child:ld,bindings:fd,setBindings:dd,flush:yd,isLevelEnabled:rd,version:ad,get level(){return this[ts]()},set level(e){this[qr](e)},get levelVal(){return this[Jf]},set levelVal(e){throw Error("levelVal is read-only")},[Uf]:id,[Gf]:md,[rs]:ud,[ts]:ed,[qr]:td};Object.setPrototypeOf(os,Hf.prototype);es.exports=function(){return Object.create(os)};var us=e=>e;function ld(e){if(!e)throw Error("missing bindings for child Pino");let t=this[ye],r=this[Lr],n=Object.create(this);if(e.hasOwnProperty("serializers")===!0){n[ye]=Object.create(null);for(let d in t)n[ye][d]=t[d];let u=Object.getOwnPropertySymbols(t);for(var i=0;i<u.length;i++){let d=u[i];n[ye][d]=t[d]}for(let d in e.serializers)n[ye][d]=e.serializers[d];let a=Object.getOwnPropertySymbols(e.serializers);for(var s=0;s<a.length;s++){let d=a[s];n[ye][d]=e.serializers[d]}}else n[ye]=t;if(e.hasOwnProperty("formatters")){let{level:u,bindings:a,log:d}=e.formatters;n[Lr]=ss(u||r.level,a||us,d||r.log)}else n[Lr]=ss(r.level,us,r.log);e.hasOwnProperty("customLevels")===!0&&(od(this.levels,e.customLevels),n.levels=nd(e.customLevels,n[Xf]),sd(n)),n[Rr]=is(n,e);let o=e.level||this.level;return n[qr](o),n}function fd(){let t=`{${this[Rr].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function dd(e){let t=is(this,e);this[Rr]=t,delete this[Vf]}function md(e,t,r){let n=this[Kf](),i=this[Yf],s=e instanceof Error,o;e==null?o=i?i({}):{}:(o=Object.assign(i?i(e):{},e),!t&&s&&(t=e.message),s&&(o.stack=e.stack,o.type||(o.type="Error")));let u=this[rs](o,t,r,n),a=this[ns];a[Zf]===!0&&(a.lastLevel=r,a.lastObj=o,a.lastMsg=t,a.lastTime=n.slice(this[Qf]),a.lastLogger=this),a instanceof Wf?a.write(u):a.write(zf(u))}function yd(){let e=this[ns];"flush"in e&&e.flush()}});var Ss=h((sg,W)=>{"use strict";var hd=require("os"),cs=ir(),pd=_i(),ls=Oi(),gd=as(),fs=Ee(),{assertDefaultLevelFound:vd,mappings:ds,genLsCache:Sd}=xr(),{createArgsNormalizer:wd,asChindings:Ed,final:bd,stringify:Et,buildSafeSonicBoom:Tr,buildFormatters:_d,noop:xd}=wt(),{version:Od}=Or(),{chindingsSym:ms,redactFmtSym:qd,serializersSym:ys,timeSym:Rd,timeSliceIndexSym:Ld,streamSym:Td,stringifySym:hs,stringifiersSym:ps,setLevelSym:Pd,endSym:kd,formatOptsSym:jd,messageKeySym:Nd,nestedKeySym:Ad,mixinSym:Cd,useOnlyCustomLevelsSym:Dd,formattersSym:gs,hooksSym:Id}=fs,{epochTime:vs,nullTime:Fd}=ls,{pid:Md}=process,$d=hd.hostname(),Bd=cs.err,Pr={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:Md,hostname:$d},serializers:Object.assign(Object.create(null),{err:Bd}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:vs,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},Hd=wd(Pr),Wd=Object.assign(Object.create(null),cs);function kr(...e){let t={},{opts:r,stream:n}=Hd(t,...e),{redact:i,crlf:s,serializers:o,timestamp:u,messageKey:a,nestedKey:d,base:c,name:f,level:l,customLevels:y,useLevelLabels:m,changeLevelName:p,levelKey:v,mixin:S,useOnlyCustomLevels:j,formatters:B,hooks:ne}=r,x=_d(B.level,B.bindings,B.log);m&&!(p||v)?(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),x.level=zd):(p||v)&&!m?(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),x.level=Ud(p||v)):(p||v)&&m&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),x.level=Jd(p||v)),o[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),x.log=o[Symbol.for("pino.*")]),x.bindings||(x.bindings=Pr.formatters.bindings),x.level||(x.level=Pr.formatters.level);let ue=i?pd(i,Et):{},g=i?{stringify:ue[qd]}:{stringify:Et},b="}"+(s?`\r
`:`
`),E=Ed.bind(null,{[ms]:"",[ys]:o,[ps]:ue,[hs]:Et,[gs]:x}),O="";c!==null&&(f===void 0?O=E(c):O=E(Object.assign({},c,{name:f})));let N=u instanceof Function?u:u?vs:Fd,L=N().indexOf(":")+1;if(j&&!y)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(S&&typeof S!="function")throw Error(`Unknown mixin type "${typeof S}" - expected "function"`);vd(l,y,j);let R=ds(y,j);return Object.assign(t,{levels:R,[Dd]:j,[Td]:n,[Rd]:N,[Ld]:L,[hs]:Et,[ps]:ue,[kd]:b,[jd]:g,[Nd]:a,[Ad]:d,[ys]:o,[Cd]:S,[ms]:O,[gs]:x,[Id]:ne,silent:xd}),Object.setPrototypeOf(t,gd()),Sd(t),t[Pd](l),t}function zd(e,t){return{level:e}}function Ud(e){return function(t,r){return{[e]:r}}}function Jd(e){return function(t,r){return{[e]:t}}}W.exports=kr;W.exports.extreme=(e=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),Tr({dest:e,minLength:4096,sync:!1}));W.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=e.dest||process.stdout.fd,Tr(e)):Tr({dest:e,minLength:0,sync:!0});W.exports.final=bd;W.exports.levels=ds();W.exports.stdSerializers=Wd;W.exports.stdTimeFunctions=Object.assign({},ls);W.exports.symbols=fs;W.exports.version=Od;W.exports.default=kr;W.exports.pino=kr});function Gd(e,t){e.length>=2?t.apply(this,[e.map(r=>typeof r=="string"?"%s":"%j").join(" "),...e]):t.apply(this,e)}var bt,Vd,Yd,G,Pe,ee,jr,ws=A(()=>{bt={awsTag:"userLogs"},Vd=require("util"),Yd=Ss(),G={assert:console.assert,debug:console.debug,dir:console.dir,error:console.error,info:console.info,log:console.log,time:console.time,timeEnd:console.timeEnd,timeLog:console.timeLog,trace:console.trace,warn:console.warn},Pe={};ee=class{static _assert(t,...r){t||console.info(...r)}static _dir(...t){console.info(Vd.inspect(...t))}static _time(t){Pe[t]=Date.now()}static _timeEnd(t){ee._timeLog(t)}static _timeLog(t,...r){if(!Pe[t]){console.warn(`Warning: No such label '${t}' for console.timeEnd()`);return}let n=Date.now()-Pe[t];Pe[t]=Date.now(),console.info(`${t}: ${n}ms`,...r)}static enable({clientIp:t,requestId:r}={}){Pe={};let n=Yd({base:bt,timestamp:!1,hooks:{logMethod:Gd}});t&&(n=n.child({clientIp:t})),r&&(n=n.child({requestId:r})),console.assert=ee._assert,console.debug=n.debug.bind(n),console.dir=ee._dir,console.error=n.error.bind(n),console.info=n.info.bind(n),console.log=n.info.bind(n),console.time=ee._time,console.timeEnd=ee._timeEnd,console.timeLog=ee._timeLog,console.trace=n.trace.bind(n),console.warn=n.warn.bind(n)}static disable(){console.assert=G.assert,console.debug=G.debug,console.dir=G.dir,console.error=G.error,console.info=G.info,console.log=G.log,console.time=G.time,console.timeEnd=G.timeEnd,console.timeLog=G.timeLog,console.trace=G.trace,console.warn=G.warn}},jr=ee});var _t,Es,xt,bs,I,ag,ke=A(()=>{_t={config:"LAYER0_CONFIG",deploymentType:"LAYER0_DEPLOYMENT_TYPE",versionOverride:"LAYER0_VERSION_OVERRIDE"},Es="AWS",xt={js:"__js__",static:"__static__",permanentStatic:"__permanent_static__",imageOptimizer:"__image_optimizer__"},bs="127.0.0.1",I={authorization:"authorization",acceptEncoding:"accept-encoding",cacheControl:"cache-control",contentEncoding:"content-encoding",contentLength:"content-length",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control",x0Browser:"x-0-browser",x0CacheControl:"x-0-cache-control",x0CachingStatus:"x-0-caching-status",x0ClientIp:"x-0-client-ip",x0Components:"x-0-components",x0Destination:"x-0-destination",x0Device:"x-0-device",x0DeviceIsBot:"x-0-device-is-bot",x0GeoCity:"x-0-geo-city",x0GeoCountryCode:"x-0-geo-country-code",x0GeoLatitude:"x-0-geo-latitude",x0GeoLongitude:"x-0-geo-longitude",x0GeoPostalCode:"x-0-geo-postal-code",x0MatchedRoutes:"x-0-matched-routes",x0Protocol:"x-0-protocol",x0Route:"x-0-route",x0Status:"x-0-status",x0SurrogateKey:"x-0-surrogate-key",x0T:"x-0-t",x0UserT:"x-0-user-t",x0Vendor:"x-0-vendor",x0Version:"x-0-version"},ag=new Set(["get","head"])});var _s={};we(_s,{isCloud:()=>xs,isLayer0RunDev:()=>Kd,isLocal:()=>Nr,isProductionBuild:()=>Os});function xs(){return process.env[_t.deploymentType]===Es}function Nr(){return process.env.LAYER0_LOCAL==="true"}function Os(){return process.env.NODE_ENV==="production"}function Kd(){return!xs()&&!Os()}var Ar=A(()=>{ke()});var qs={};we(qs,{default:()=>Rt,logDownstreamRequestInfo:()=>Dr,logDownstreamResponseInfo:()=>Ir,logUpstreamRequestInfo:()=>om,logUpstreamResponseBodyInfo:()=>am,logUpstreamResponseInfo:()=>um});function em(e){return e.indexOf(Zd)>=0}function je(e,t){try{process.env.LAYER0_HTTP_REQUEST_LOGGING==="1"&&(Ot.stdoutWrite.apply(process.stdout,[JSON.stringify(T(T({level:t},Cr),{data:e}))]),Ot.stdoutWrite.apply(process.stdout,[`
`]))}catch(r){console.error(`Error while logging HTTP request info at level ${t}: ${r&&r.message}`)}}function Dr(e){return je(e,tm)}function Ir(e){return je(e,rm)}function om(e){return je(e,nm)}function um(e){return je(e,im)}function am(e){return je(e,sm)}function Ls(e,t){let r=e.write;e.write=function(n,...i){let s;return typeof n=="object"?s=Buffer.from(n).toString():s=n,n&&!em(s)&&(n=JSON.stringify(T(T({},t),{msg:s}))+`
`),r.apply(e,[n,...i])}}var Rs,Ot,Qd,Xd,qt,Zd,tm,rm,nm,im,sm,Cr,cm,Rt,Fr=A(()=>{ws();Rs=(Ar(),_s),Ot={stdoutWrite:process.stdout.write,stderrWrite:process.stderr.write},Qd=50,Xd=30,qt=0,Zd=JSON.stringify(bt).replace("{","").replace("}","");tm=100,rm=101,nm=102,im=103,sm=104,Cr={};cm={enable:({clientIp:e,requestId:t}={})=>{if(!!Rs.isCloud()){if(qt===0){let r=bt;e&&(r=T(T({},r),{clientIp:e})),t&&(r=T(T({},r),{requestId:t})),Cr=r,Ls(process.stdout,T({level:Xd},r)),Ls(process.stderr,T({level:Qd},r)),jr.enable({clientIp:e,requestId:t})}qt++}},disable:()=>{!Rs.isCloud()||(qt--,qt===0&&(process.stdout.write=Ot.stdoutWrite,process.stderr.write=Ot.stderrWrite,Cr={},jr.disable()))}},Rt=cm});var Ts={};we(Ts,{default:()=>Ne});function Mr(e){return Buffer.from(e).toString("base64")}function fm(e){if(!e)return;let t="content-encoding",r=e[t];if(!r){for(let n of Object.keys(e))if(n.toLowerCase()===t){r=e[n];break}}return Array.isArray(r)&&(r.length?r=r[0]:r=void 0),r}function Ne(e,t){try{if(!e||e.length===0)return{};let r;if(typeof e=="string")r=Buffer.from(e,"base64");else if(Buffer.isBuffer(e))r=e;else if(Array.isArray(e))r=Buffer.concat(e);else return{body:Mr(`Unknown body format: ${typeof e}`),bodyLength:e.length,bodyTruncated:!0};let n=fm(t);if(typeof n=="string"&&n.toLowerCase()==="gzip")try{r=lm(r)}catch(i){return{body:Mr(`Error while unzipping the body: ${i.message}`),bodyLength:r.length,bodyTruncated:!0}}return{body:r.slice(0,Ps).toString("base64"),bodyLength:r.length,bodyTruncated:r.length>Ps}}catch(r){return{body:Mr(`Error while getting body logging data: ${r&&r.message}`),bodyLength:e.length,bodyTruncated:!0}}}var lm,Ps,$r=A(()=>{lm=require("zlib").gunzipSync,Ps=8*1024});var Fs=h((fg,ks)=>{"use strict";var{inherits:dm}=require("util"),{logUpstreamRequestInfo:mm,logUpstreamResponseInfo:ym,logUpstreamResponseBodyInfo:hm}=(Fr(),qs),Ae=require("http"),js=require("https"),pm=require("url"),Ns=($r(),Ts).default,gm=/^xdn-user-assets-[a-zA-Z0-9-]+-[0-9]+\.s3\.amazonaws\.com$/;function As(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}var Cs=!1,vm=Symbol("query"),Br=vm;function Ds(e,t,r){if(typeof e=="string"){let n=e;try{e=As(new URL(n))}catch(i){if(e=pm.parse(n),!e.hostname)throw i;!Cs&&!process.noDeprecation&&(Cs=!0,process.emitWarning(`The provided URL ${n} is not a valid URL, and is supported in the http module solely for compatibility.`,"DeprecationWarning","DEP0109"))}}else e&&e[Br]&&e[Br][Br]?e=As(e):(r=t,t=e,e=null);return typeof t=="function"?(r=t,t=e||{}):t=Object.assign(e||{},t),{options:t,callback:r}}var Ce=Ae.ClientRequest,Is=0,Hr=[];function Wr(...e){let{options:t,callback:r}=Ds(...e),n=t.hostname||t.host;if(n&&(["127.0.0.1","0.0.0.0","::1","0:0:0:0:0:0:0:1","localhost"].includes(n)||gm.test(n)))Ce.call(this,t,r);else{let s=Sm(this,t,r);Ce.call(this,t,s)}}function Sm(e,t,r){let n=Is++;Hr[n]=Date.now();let i=u=>{ym({id:n,statusCode:u.statusCode,statusMessage:u.statusMessage,headers:u.headers,duration:Date.now()-Hr[n]});let a=[];u.on("data",d=>{a.push(d)}),u.on("end",()=>{hm(T({id:n},Ns(a,u.headers)))}),r&&r(u)},s=[],o=function(u,a){if(Buffer.isBuffer(u)||typeof u=="string"){let d=u;Buffer.isBuffer(d)||(typeof a!="string"&&(a=null),d=Buffer.from(u,a)),s.push(d)}};return e.write=function(u,a,d){return o(u,a),Object.getPrototypeOf(Object.getPrototypeOf(e)).write.call(e,u,a,d)}.bind(e),e.end=function(u,a,d){return o(u,a),mm(T({id:n,method:t.method,protocol:t.protocol,host:t.hostname||t.host,port:t.port,path:t.path,headers:t.headers},Ns(s,t.headers))),Object.getPrototypeOf(Object.getPrototypeOf(e)).end.call(e,u,a,d)}.bind(e),i}dm(Wr,Ae.ClientRequest);var Lt=Ce;Ae.request=function(t,r,n){return new Lt(t,r,n)};js.request=function(...t){let{options:r,callback:n}=Ds(...t);return r._defaultAgent=js.globalAgent,new Lt(r,n)};function wm(){Lt=Wr,Ae.ClientRequest=Wr,Is=0,Hr=[]}function Em(){Lt=Ce,Ae.ClientRequest=Ce}ks.exports={enableRequestLogging:wm,disableRequestLogging:Em}});var F=h(zr=>{"use strict";zr.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};zr.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var $s=h((mg,Ms)=>{var ce=require("constants"),bm=process.cwd,Tt=null,_m=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Tt||(Tt=bm.call(process)),Tt};try{process.cwd()}catch(e){}var xm=process.chdir;process.chdir=function(e){Tt=null,xm.call(process,e)};Ms.exports=Om;function Om(e){ce.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=u(e.stat),e.fstat=u(e.fstat),e.lstat=u(e.lstat),e.statSync=a(e.statSync),e.fstatSync=a(e.fstatSync),e.lstatSync=a(e.lstatSync),e.lchmod||(e.lchmod=function(c,f,l){l&&process.nextTick(l)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(c,f,l,y){y&&process.nextTick(y)},e.lchownSync=function(){}),_m==="win32"&&(e.rename=function(c){return function(f,l,y){var m=Date.now(),p=0;c(f,l,function v(S){if(S&&(S.code==="EACCES"||S.code==="EPERM")&&Date.now()-m<6e4){setTimeout(function(){e.stat(l,function(j,B){j&&j.code==="ENOENT"?c(f,l,v):y(S)})},p),p<100&&(p+=10);return}y&&y(S)})}}(e.rename)),e.read=function(c){function f(l,y,m,p,v,S){var j;if(S&&typeof S=="function"){var B=0;j=function(ne,x,ue){if(ne&&ne.code==="EAGAIN"&&B<10)return B++,c.call(e,l,y,m,p,v,j);S.apply(this,arguments)}}return c.call(e,l,y,m,p,v,j)}return f.__proto__=c,f}(e.read),e.readSync=function(c){return function(f,l,y,m,p){for(var v=0;;)try{return c.call(e,f,l,y,m,p)}catch(S){if(S.code==="EAGAIN"&&v<10){v++;continue}throw S}}}(e.readSync);function t(c){c.lchmod=function(f,l,y){c.open(f,ce.O_WRONLY|ce.O_SYMLINK,l,function(m,p){if(m){y&&y(m);return}c.fchmod(p,l,function(v){c.close(p,function(S){y&&y(v||S)})})})},c.lchmodSync=function(f,l){var y=c.openSync(f,ce.O_WRONLY|ce.O_SYMLINK,l),m=!0,p;try{p=c.fchmodSync(y,l),m=!1}finally{if(m)try{c.closeSync(y)}catch(v){}else c.closeSync(y)}return p}}function r(c){ce.hasOwnProperty("O_SYMLINK")?(c.lutimes=function(f,l,y,m){c.open(f,ce.O_SYMLINK,function(p,v){if(p){m&&m(p);return}c.futimes(v,l,y,function(S){c.close(v,function(j){m&&m(S||j)})})})},c.lutimesSync=function(f,l,y){var m=c.openSync(f,ce.O_SYMLINK),p,v=!0;try{p=c.futimesSync(m,l,y),v=!1}finally{if(v)try{c.closeSync(m)}catch(S){}else c.closeSync(m)}return p}):(c.lutimes=function(f,l,y,m){m&&process.nextTick(m)},c.lutimesSync=function(){})}function n(c){return c&&function(f,l,y){return c.call(e,f,l,function(m){d(m)&&(m=null),y&&y.apply(this,arguments)})}}function i(c){return c&&function(f,l){try{return c.call(e,f,l)}catch(y){if(!d(y))throw y}}}function s(c){return c&&function(f,l,y,m){return c.call(e,f,l,y,function(p){d(p)&&(p=null),m&&m.apply(this,arguments)})}}function o(c){return c&&function(f,l,y){try{return c.call(e,f,l,y)}catch(m){if(!d(m))throw m}}}function u(c){return c&&function(f,l,y){typeof l=="function"&&(y=l,l=null);function m(p,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),y&&y.apply(this,arguments)}return l?c.call(e,f,l,m):c.call(e,f,m)}}function a(c){return c&&function(f,l){var y=l?c.call(e,f,l):c.call(e,f);return y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296),y}}function d(c){if(!c||c.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Ws=h((yg,Bs)=>{var Hs=require("stream").Stream;Bs.exports=qm;function qm(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Hs.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),u=0,a=o.length;u<a;u++){var d=o[u];this[d]=i[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(c,f){if(c){s.emit("error",c),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Hs.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,u=s.length;o<u;o++){var a=s[o];this[a]=i[a]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Us=h((hg,zs)=>{"use strict";zs.exports=Rm;function Rm(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var q=h((pg,Ur)=>{var te=require("fs"),Lm=$s(),Tm=Ws(),Pm=Us(),Pt=require("util"),le,kt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(le=Symbol.for("graceful-fs.queue"),kt=Symbol.for("graceful-fs.previous")):(le="___graceful-fs.queue",kt="___graceful-fs.previous");function km(){}var De=km;Pt.debuglog?De=Pt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(De=function(){var e=Pt.format.apply(Pt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});global[le]||(Js=[],Object.defineProperty(global,le,{get:function(){return Js}}),te.close=function(e){function t(r,n){return e.call(te,r,function(i){i||he(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,kt,{value:e}),t}(te.close),te.closeSync=function(e){function t(r){e.apply(te,arguments),he()}return Object.defineProperty(t,kt,{value:e}),t}(te.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){De(global[le]),require("assert").equal(global[le].length,0)}));var Js;Ur.exports=Jr(Pm(te));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!te.__patched&&(Ur.exports=Jr(te),te.__patched=!0);function Jr(e){Lm(e),e.gracefulify=Jr,e.createReadStream=B,e.createWriteStream=ne;var t=e.readFile;e.readFile=r;function r(g,b,E){return typeof b=="function"&&(E=b,b=null),O(g,b,E);function O(N,L,R){return t(N,L,function(H){H&&(H.code==="EMFILE"||H.code==="ENFILE")?Ie([O,[N,L,R]]):(typeof R=="function"&&R.apply(this,arguments),he())})}}var n=e.writeFile;e.writeFile=i;function i(g,b,E,O){return typeof E=="function"&&(O=E,E=null),N(g,b,E,O);function N(L,R,H,J){return n(L,R,H,function(V){V&&(V.code==="EMFILE"||V.code==="ENFILE")?Ie([N,[L,R,H,J]]):(typeof J=="function"&&J.apply(this,arguments),he())})}}var s=e.appendFile;s&&(e.appendFile=o);function o(g,b,E,O){return typeof E=="function"&&(O=E,E=null),N(g,b,E,O);function N(L,R,H,J){return s(L,R,H,function(V){V&&(V.code==="EMFILE"||V.code==="ENFILE")?Ie([N,[L,R,H,J]]):(typeof J=="function"&&J.apply(this,arguments),he())})}}var u=e.readdir;e.readdir=a;function a(g,b,E){var O=[g];return typeof b!="function"?O.push(b):E=b,O.push(N),d(O);function N(L,R){R&&R.sort&&R.sort(),L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ie([d,[O]]):(typeof E=="function"&&E.apply(this,arguments),he())}}function d(g){return u.apply(e,g)}if(process.version.substr(0,4)==="v0.8"){var c=Tm(e);p=c.ReadStream,S=c.WriteStream}var f=e.ReadStream;f&&(p.prototype=Object.create(f.prototype),p.prototype.open=v);var l=e.WriteStream;l&&(S.prototype=Object.create(l.prototype),S.prototype.open=j),Object.defineProperty(e,"ReadStream",{get:function(){return p},set:function(g){p=g},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(g){S=g},enumerable:!0,configurable:!0});var y=p;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(g){y=g},enumerable:!0,configurable:!0});var m=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return m},set:function(g){m=g},enumerable:!0,configurable:!0});function p(g,b){return this instanceof p?(f.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function v(){var g=this;ue(g.path,g.flags,g.mode,function(b,E){b?(g.autoClose&&g.destroy(),g.emit("error",b)):(g.fd=E,g.emit("open",E),g.read())})}function S(g,b){return this instanceof S?(l.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function j(){var g=this;ue(g.path,g.flags,g.mode,function(b,E){b?(g.destroy(),g.emit("error",b)):(g.fd=E,g.emit("open",E))})}function B(g,b){return new e.ReadStream(g,b)}function ne(g,b){return new e.WriteStream(g,b)}var x=e.open;e.open=ue;function ue(g,b,E,O){return typeof E=="function"&&(O=E,E=null),N(g,b,E,O);function N(L,R,H,J){return x(L,R,H,function(V,op){V&&(V.code==="EMFILE"||V.code==="ENFILE")?Ie([N,[L,R,H,J]]):(typeof J=="function"&&J.apply(this,arguments),he())})}}return e}function Ie(e){De("ENQUEUE",e[0].name,e[1]),global[le].push(e)}function he(){var e=global[le].shift();e&&(De("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}});var Vr=h(pe=>{"use strict";var Vs=F().fromCallback,z=q(),jm=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof z[e]=="function");Object.keys(z).forEach(e=>{e!=="promises"&&(pe[e]=z[e])});jm.forEach(e=>{pe[e]=Vs(z[e])});pe.exists=function(e,t){return typeof t=="function"?z.exists(e,t):new Promise(r=>z.exists(e,r))};pe.read=function(e,t,r,n,i,s){return typeof s=="function"?z.read(e,t,r,n,i,s):new Promise((o,u)=>{z.read(e,t,r,n,i,(a,d,c)=>{if(a)return u(a);o({bytesRead:d,buffer:c})})})};pe.write=function(e,t,...r){return typeof r[r.length-1]=="function"?z.write(e,t,...r):new Promise((n,i)=>{z.write(e,t,...r,(s,o,u)=>{if(s)return i(s);n({bytesWritten:o,buffer:u})})})};typeof z.realpath.native=="function"&&(pe.realpath.native=Vs(z.realpath.native))});var Gr=h((vg,Ys)=>{"use strict";var Yr=require("path");function Gs(e){return e=Yr.normalize(Yr.resolve(e)).split(Yr.sep),e.length>0?e[0]:null}var Nm=/[<>:"|?*]/;function Am(e){let t=Gs(e);return e=e.replace(t,""),Nm.test(e)}Ys.exports={getRootPath:Gs,invalidWin32Path:Am}});var Qs=h((Sg,Ks)=>{"use strict";var Cm=q(),Kr=require("path"),Dm=Gr().invalidWin32Path,Im=parseInt("0777",8);function Qr(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&Dm(e)){let o=new Error(e+" contains invalid WIN32 path characters.");return o.code="EINVAL",r(o)}let i=t.mode,s=t.fs||Cm;i===void 0&&(i=Im&~process.umask()),n||(n=null),r=r||function(){},e=Kr.resolve(e),s.mkdir(e,i,o=>{if(!o)return n=n||e,r(null,n);switch(o.code){case"ENOENT":if(Kr.dirname(e)===e)return r(o);Qr(Kr.dirname(e),t,(u,a)=>{u?r(u,a):Qr(e,t,r,a)});break;default:s.stat(e,(u,a)=>{u||!a.isDirectory()?r(o,n):r(null,n)});break}})}Ks.exports=Qr});var Zs=h((wg,Xs)=>{"use strict";var Fm=q(),Xr=require("path"),Mm=Gr().invalidWin32Path,$m=parseInt("0777",8);function Zr(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||Fm;if(process.platform==="win32"&&Mm(e)){let s=new Error(e+" contains invalid WIN32 path characters.");throw s.code="EINVAL",s}n===void 0&&(n=$m&~process.umask()),r||(r=null),e=Xr.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(s){if(s.code==="ENOENT"){if(Xr.dirname(e)===e)throw s;r=Zr(Xr.dirname(e),t,r),Zr(e,t,r)}else{let o;try{o=i.statSync(e)}catch(u){throw s}if(!o.isDirectory())throw s}}return r}Xs.exports=Zr});var $=h((Eg,eo)=>{"use strict";var Bm=F().fromCallback,en=Bm(Qs()),tn=Zs();eo.exports={mkdirs:en,mkdirsSync:tn,mkdirp:en,mkdirpSync:tn,ensureDir:en,ensureDirSync:tn}});var rn=h((bg,to)=>{"use strict";var C=q(),ro=require("os"),jt=require("path");function Hm(){let e=jt.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=jt.join(ro.tmpdir(),e);let t=new Date(1435410243862);C.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=C.openSync(e,"r+");return C.futimesSync(r,t,t),C.closeSync(r),C.statSync(e).mtime>1435410243e3}function Wm(e){let t=jt.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=jt.join(ro.tmpdir(),t);let r=new Date(1435410243862);C.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);C.open(t,"r+",(i,s)=>{if(i)return e(i);C.futimes(s,r,r,o=>{if(o)return e(o);C.close(s,u=>{if(u)return e(u);C.stat(t,(a,d)=>{if(a)return e(a);e(null,d.mtime>1435410243e3)})})})})})}function zm(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function Um(e,t,r,n){C.open(e,"r+",(i,s)=>{if(i)return n(i);C.futimes(s,t,r,o=>{C.close(s,u=>{n&&n(o||u)})})})}function Jm(e,t,r){let n=C.openSync(e,"r+");return C.futimesSync(n,t,r),C.closeSync(n)}to.exports={hasMillisRes:Wm,hasMillisResSync:Hm,timeRemoveMillis:zm,utimesMillis:Um,utimesMillisSync:Jm}});var $e=h((_g,no)=>{"use strict";var U=q(),M=require("path"),io=10,so=5,Vm=0,nn=process.versions.node.split("."),oo=Number.parseInt(nn[0],10),uo=Number.parseInt(nn[1],10),Ym=Number.parseInt(nn[2],10);function Fe(){if(oo>io)return!0;if(oo===io){if(uo>so)return!0;if(uo===so&&Ym>=Vm)return!0}return!1}function Gm(e,t,r){Fe()?U.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);U.stat(t,{bigint:!0},(s,o)=>s?s.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(s):r(null,{srcStat:i,destStat:o}))}):U.stat(e,(n,i)=>{if(n)return r(n);U.stat(t,(s,o)=>s?s.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(s):r(null,{srcStat:i,destStat:o}))})}function Km(e,t){let r,n;Fe()?r=U.statSync(e,{bigint:!0}):r=U.statSync(e);try{Fe()?n=U.statSync(t,{bigint:!0}):n=U.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function Qm(e,t,r,n){Gm(e,t,(i,s)=>{if(i)return n(i);let{srcStat:o,destStat:u}=s;return u&&u.ino&&u.dev&&u.ino===o.ino&&u.dev===o.dev?n(new Error("Source and destination must not be the same.")):o.isDirectory()&&sn(e,t)?n(new Error(Me(e,t,r))):n(null,{srcStat:o,destStat:u})})}function Xm(e,t,r){let{srcStat:n,destStat:i}=Km(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&sn(e,t))throw new Error(Me(e,t,r));return{srcStat:n,destStat:i}}function on(e,t,r,n,i){let s=M.resolve(M.dirname(e)),o=M.resolve(M.dirname(r));if(o===s||o===M.parse(o).root)return i();Fe()?U.stat(o,{bigint:!0},(u,a)=>u?u.code==="ENOENT"?i():i(u):a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev?i(new Error(Me(e,r,n))):on(e,t,o,n,i)):U.stat(o,(u,a)=>u?u.code==="ENOENT"?i():i(u):a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev?i(new Error(Me(e,r,n))):on(e,t,o,n,i))}function ao(e,t,r,n){let i=M.resolve(M.dirname(e)),s=M.resolve(M.dirname(r));if(s===i||s===M.parse(s).root)return;let o;try{Fe()?o=U.statSync(s,{bigint:!0}):o=U.statSync(s)}catch(u){if(u.code==="ENOENT")return;throw u}if(o.ino&&o.dev&&o.ino===t.ino&&o.dev===t.dev)throw new Error(Me(e,r,n));return ao(e,t,s,n)}function sn(e,t){let r=M.resolve(e).split(M.sep).filter(i=>i),n=M.resolve(t).split(M.sep).filter(i=>i);return r.reduce((i,s,o)=>i&&n[o]===s,!0)}function Me(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}no.exports={checkPaths:Qm,checkPathsSync:Xm,checkParentPaths:on,checkParentPathsSync:ao,isSrcSubdir:sn}});var lo=h((xg,co)=>{"use strict";co.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}});var po=h((Og,fo)=>{"use strict";var _=q(),Be=require("path"),Zm=$().mkdirsSync,ey=rn().utimesMillisSync,He=$e();function ry(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=He.checkPathsSync(e,t,"copy");return He.checkParentPathsSync(e,n,t,"copy"),ty(i,e,t,r)}function ty(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=Be.dirname(r);return _.existsSync(i)||Zm(i),mo(e,t,r,n)}function mo(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return ny(e,t,r,n)}function ny(e,t,r,n){let s=(n.dereference?_.statSync:_.lstatSync)(t);if(s.isDirectory())return sy(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return iy(s,e,t,r,n);if(s.isSymbolicLink())return oy(e,t,r,n)}function iy(e,t,r,n,i){return t?uy(e,r,n,i):yo(e,r,n,i)}function uy(e,t,r,n){if(n.overwrite)return _.unlinkSync(r),yo(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function yo(e,t,r,n){return typeof _.copyFileSync=="function"?(_.copyFileSync(t,r),_.chmodSync(r,e.mode),n.preserveTimestamps?ey(r,e.atime,e.mtime):void 0):ay(e,t,r,n)}function ay(e,t,r,n){let i=64*1024,s=lo()(i),o=_.openSync(t,"r"),u=_.openSync(r,"w",e.mode),a=0;for(;a<e.size;){let d=_.readSync(o,s,0,i,a);_.writeSync(u,s,0,d),a+=d}n.preserveTimestamps&&_.futimesSync(u,e.atime,e.mtime),_.closeSync(o),_.closeSync(u)}function sy(e,t,r,n,i){if(!t)return cy(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return ho(r,n,i)}function cy(e,t,r,n){return _.mkdirSync(r),ho(t,r,n),_.chmodSync(r,e.mode)}function ho(e,t,r){_.readdirSync(e).forEach(n=>ly(n,e,t,r))}function ly(e,t,r,n){let i=Be.join(t,e),s=Be.join(r,e),{destStat:o}=He.checkPathsSync(i,s,"copy");return mo(o,i,s,n)}function oy(e,t,r,n){let i=_.readlinkSync(t);if(n.dereference&&(i=Be.resolve(process.cwd(),i)),e){let s;try{s=_.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return _.symlinkSync(i,r);throw o}if(n.dereference&&(s=Be.resolve(process.cwd(),s)),He.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(_.statSync(r).isDirectory()&&He.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return fy(i,r)}else return _.symlinkSync(i,r)}function fy(e,t){return _.unlinkSync(t),_.symlinkSync(e,t)}fo.exports=ry});var un=h((qg,go)=>{"use strict";go.exports={copySync:po()}});var re=h((Rg,vo)=>{"use strict";var dy=F().fromPromise,So=Vr();function my(e){return So.access(e).then(()=>!0).catch(()=>!1)}vo.exports={pathExists:dy(my),pathExistsSync:So.existsSync}});var Lo=h((Lg,wo)=>{"use strict";var k=q(),We=require("path"),yy=$().mkdirs,hy=re().pathExists,py=rn().utimesMillis,ze=$e();function gy(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),ze.checkPaths(e,t,"copy",(i,s)=>{if(i)return n(i);let{srcStat:o,destStat:u}=s;ze.checkParentPaths(e,o,t,"copy",a=>a?n(a):r.filter?bo(Eo,u,e,t,r,n):Eo(u,e,t,r,n))})}function Eo(e,t,r,n,i){let s=We.dirname(r);hy(s,(o,u)=>{if(o)return i(o);if(u)return an(e,t,r,n,i);yy(s,a=>a?i(a):an(e,t,r,n,i))})}function bo(e,t,r,n,i,s){Promise.resolve(i.filter(r,n)).then(o=>o?e(t,r,n,i,s):s(),o=>s(o))}function an(e,t,r,n,i){return n.filter?bo(_o,e,t,r,n,i):_o(e,t,r,n,i)}function _o(e,t,r,n,i){(n.dereference?k.stat:k.lstat)(t,(o,u)=>{if(o)return i(o);if(u.isDirectory())return Sy(u,e,t,r,n,i);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return vy(u,e,t,r,n,i);if(u.isSymbolicLink())return wy(e,t,r,n,i)})}function vy(e,t,r,n,i,s){return t?Ey(e,r,n,i,s):xo(e,r,n,i,s)}function Ey(e,t,r,n,i){if(n.overwrite)k.unlink(r,s=>s?i(s):xo(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function xo(e,t,r,n,i){return typeof k.copyFile=="function"?k.copyFile(t,r,s=>s?i(s):Oo(e,r,n,i)):by(e,t,r,n,i)}function by(e,t,r,n,i){let s=k.createReadStream(t);s.on("error",o=>i(o)).once("open",()=>{let o=k.createWriteStream(r,{mode:e.mode});o.on("error",u=>i(u)).on("open",()=>s.pipe(o)).once("close",()=>Oo(e,r,n,i))})}function Oo(e,t,r,n){k.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?py(t,e.atime,e.mtime,n):n())}function Sy(e,t,r,n,i,s){return t?t&&!t.isDirectory()?s(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):qo(r,n,i,s):_y(e,r,n,i,s)}function _y(e,t,r,n,i){k.mkdir(r,s=>{if(s)return i(s);qo(t,r,n,o=>o?i(o):k.chmod(r,e.mode,i))})}function qo(e,t,r,n){k.readdir(e,(i,s)=>i?n(i):Ro(s,e,t,r,n))}function Ro(e,t,r,n,i){let s=e.pop();return s?xy(e,s,t,r,n,i):i()}function xy(e,t,r,n,i,s){let o=We.join(r,t),u=We.join(n,t);ze.checkPaths(o,u,"copy",(a,d)=>{if(a)return s(a);let{destStat:c}=d;an(c,o,u,i,f=>f?s(f):Ro(e,r,n,i,s))})}function wy(e,t,r,n,i){k.readlink(t,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=We.resolve(process.cwd(),o)),e)k.readlink(r,(u,a)=>u?u.code==="EINVAL"||u.code==="UNKNOWN"?k.symlink(o,r,i):i(u):(n.dereference&&(a=We.resolve(process.cwd(),a)),ze.isSrcSubdir(o,a)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${a}'.`)):e.isDirectory()&&ze.isSrcSubdir(a,o)?i(new Error(`Cannot overwrite '${a}' with '${o}'.`)):Oy(o,r,i)));else return k.symlink(o,r,i)})}function Oy(e,t,r){k.unlink(t,n=>n?r(n):k.symlink(e,t,r))}wo.exports=gy});var cn=h((Tg,To)=>{"use strict";var qy=F().fromCallback;To.exports={copy:qy(Lo())}});var Fo=h((Pg,Po)=>{"use strict";var ko=q(),jo=require("path"),w=require("assert"),Ue=process.platform==="win32";function No(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||ko[r],r=r+"Sync",e[r]=e[r]||ko[r]}),e.maxBusyTries=e.maxBusyTries||3}function ln(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),w(e,"rimraf: missing path"),w.strictEqual(typeof e,"string","rimraf: path should be a string"),w.strictEqual(typeof r,"function","rimraf: callback function required"),w(t,"rimraf: invalid options argument provided"),w.strictEqual(typeof t,"object","rimraf: options should be object"),No(t),Ao(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<t.maxBusyTries){n++;let o=n*100;return setTimeout(()=>Ao(e,t,i),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function Ao(e,t,r){w(e),w(t),w(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Ue)return Co(e,t,n,r);if(i&&i.isDirectory())return Nt(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return Ue?Co(e,t,s,r):Nt(e,t,s,r);if(s.code==="EISDIR")return Nt(e,t,s,r)}return r(s)})})}function Co(e,t,r,n){w(e),w(t),w(typeof n=="function"),r&&w(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,o)=>{s?n(s.code==="ENOENT"?null:r):o.isDirectory()?Nt(e,t,r,n):t.unlink(e,n)})})}function Do(e,t,r){let n;w(e),w(t),r&&w(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?At(e,t,r):t.unlinkSync(e)}function Nt(e,t,r,n){w(e),w(t),r&&w(r instanceof Error),w(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Ry(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Ry(e,t,r){w(e),w(t),w(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length,o;if(s===0)return t.rmdir(e,r);i.forEach(u=>{ln(jo.join(e,u),t,a=>{if(!o){if(a)return r(o=a);--s==0&&t.rmdir(e,r)}})})})}function Io(e,t){let r;t=t||{},No(t),w(e,"rimraf: missing path"),w.strictEqual(typeof e,"string","rimraf: path should be a string"),w(t,"rimraf: missing options"),w.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Ue&&Do(e,t,n)}try{r&&r.isDirectory()?At(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Ue?Do(e,t,n):At(e,t,n);if(n.code!=="EISDIR")throw n;At(e,t,n)}}function At(e,t,r){w(e),w(t),r&&w(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Ly(e,t);else if(n.code!=="ENOENT")throw n}}function Ly(e,t){if(w(e),w(t),t.readdirSync(e).forEach(r=>Io(jo.join(e,r),t)),Ue){let r=Date.now();do try{return t.rmdirSync(e,t)}catch(n){}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Po.exports=ln;ln.sync=Io});var Je=h((kg,Mo)=>{"use strict";var Ty=F().fromCallback,$o=Fo();Mo.exports={remove:Ty($o),removeSync:$o.sync}});var Yo=h((jg,Bo)=>{"use strict";var Py=F().fromCallback,Ho=q(),Wo=require("path"),zo=$(),Uo=Je(),Jo=Py(function(t,r){r=r||function(){},Ho.readdir(t,(n,i)=>{if(n)return zo.mkdirs(t,r);i=i.map(o=>Wo.join(t,o)),s();function s(){let o=i.pop();if(!o)return r();Uo.remove(o,u=>{if(u)return r(u);s()})}})});function Vo(e){let t;try{t=Ho.readdirSync(e)}catch(r){return zo.mkdirsSync(e)}t.forEach(r=>{r=Wo.join(e,r),Uo.removeSync(r)})}Bo.exports={emptyDirSync:Vo,emptydirSync:Vo,emptyDir:Jo,emptydir:Jo}});var Xo=h((Ng,Go)=>{"use strict";var ky=F().fromCallback,Ko=require("path"),Ve=q(),Qo=$(),jy=re().pathExists;function Ny(e,t){function r(){Ve.writeFile(e,"",n=>{if(n)return t(n);t()})}Ve.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let s=Ko.dirname(e);jy(s,(o,u)=>{if(o)return t(o);if(u)return r();Qo.mkdirs(s,a=>{if(a)return t(a);r()})})})}function Ay(e){let t;try{t=Ve.statSync(e)}catch(n){}if(t&&t.isFile())return;let r=Ko.dirname(e);Ve.existsSync(r)||Qo.mkdirsSync(r),Ve.writeFileSync(e,"")}Go.exports={createFile:ky(Ny),createFileSync:Ay}});var nu=h((Ag,Zo)=>{"use strict";var Cy=F().fromCallback,eu=require("path"),ge=q(),tu=$(),ru=re().pathExists;function Dy(e,t,r){function n(i,s){ge.link(i,s,o=>{if(o)return r(o);r(null)})}ru(t,(i,s)=>{if(i)return r(i);if(s)return r(null);ge.lstat(e,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);let u=eu.dirname(t);ru(u,(a,d)=>{if(a)return r(a);if(d)return n(e,t);tu.mkdirs(u,c=>{if(c)return r(c);n(e,t)})})})})}function Iy(e,t){if(ge.existsSync(t))return;try{ge.lstatSync(e)}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=eu.dirname(t);return ge.existsSync(n)||tu.mkdirsSync(n),ge.linkSync(e,t)}Zo.exports={createLink:Cy(Dy),createLinkSync:Iy}});var su=h((Cg,iu)=>{"use strict";var fe=require("path"),Ye=q(),Fy=re().pathExists;function My(e,t,r){if(fe.isAbsolute(e))return Ye.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=fe.dirname(t),i=fe.join(n,e);return Fy(i,(s,o)=>s?r(s):o?r(null,{toCwd:i,toDst:e}):Ye.lstat(e,u=>u?(u.message=u.message.replace("lstat","ensureSymlink"),r(u)):r(null,{toCwd:e,toDst:fe.relative(n,e)})))}}function $y(e,t){let r;if(fe.isAbsolute(e)){if(r=Ye.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=fe.dirname(t),i=fe.join(n,e);if(r=Ye.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Ye.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:fe.relative(n,e)}}}iu.exports={symlinkPaths:My,symlinkPathsSync:$y}});var au=h((Dg,ou)=>{"use strict";var uu=q();function By(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);uu.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function Hy(e,t){let r;if(t)return t;try{r=uu.lstatSync(e)}catch(n){return"file"}return r&&r.isDirectory()?"dir":"file"}ou.exports={symlinkType:By,symlinkTypeSync:Hy}});var hu=h((Ig,cu)=>{"use strict";var Wy=F().fromCallback,lu=require("path"),_e=q(),fu=$(),zy=fu.mkdirs,Uy=fu.mkdirsSync,du=su(),Jy=du.symlinkPaths,Vy=du.symlinkPathsSync,mu=au(),Yy=mu.symlinkType,Gy=mu.symlinkTypeSync,yu=re().pathExists;function Ky(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,yu(t,(i,s)=>{if(i)return n(i);if(s)return n(null);Jy(e,t,(o,u)=>{if(o)return n(o);e=u.toDst,Yy(u.toCwd,r,(a,d)=>{if(a)return n(a);let c=lu.dirname(t);yu(c,(f,l)=>{if(f)return n(f);if(l)return _e.symlink(e,t,d,n);zy(c,y=>{if(y)return n(y);_e.symlink(e,t,d,n)})})})})})}function Qy(e,t,r){if(_e.existsSync(t))return;let i=Vy(e,t);e=i.toDst,r=Gy(i.toCwd,r);let s=lu.dirname(t);return _e.existsSync(s)||Uy(s),_e.symlinkSync(e,t,r)}cu.exports={createSymlink:Wy(Ky),createSymlinkSync:Qy}});var gu=h((Fg,pu)=>{"use strict";var Ct=Xo(),Dt=nu(),It=hu();pu.exports={createFile:Ct.createFile,createFileSync:Ct.createFileSync,ensureFile:Ct.createFile,ensureFileSync:Ct.createFileSync,createLink:Dt.createLink,createLinkSync:Dt.createLinkSync,ensureLink:Dt.createLink,ensureLinkSync:Dt.createLinkSync,createSymlink:It.createSymlink,createSymlinkSync:It.createSymlinkSync,ensureSymlink:It.createSymlink,ensureSymlinkSync:It.createSymlinkSync}});var Eu=h((Mg,vu)=>{var xe;try{xe=q()}catch(e){xe=require("fs")}function Xy(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||xe,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(s,o){if(s)return r(s);o=Su(o);var u;try{u=JSON.parse(o,t?t.reviver:null)}catch(a){return i?(a.message=e+": "+a.message,r(a)):r(null,null)}r(null,u)})}function Zy(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||xe,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=Su(i),JSON.parse(i,t.reviver)}catch(s){if(n)throw s.message=e+": "+s.message,s;return null}}function wu(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\n/g,n)+n}function eh(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||xe,s="";try{s=wu(t,r)}catch(o){n&&n(o,null);return}i.writeFile(e,s,r,n)}function th(e,t,r){r=r||{};var n=r.fs||xe,i=wu(t,r);return n.writeFileSync(e,i,r)}function Su(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var rh={readFile:Xy,readFileSync:Zy,writeFile:eh,writeFileSync:th};vu.exports=rh});var Mt=h(($g,bu)=>{"use strict";var _u=F().fromCallback,Ft=Eu();bu.exports={readJson:_u(Ft.readFile),readJsonSync:Ft.readFileSync,writeJson:_u(Ft.writeFile),writeJsonSync:Ft.writeFileSync}});var qu=h((Bg,xu)=>{"use strict";var nh=require("path"),ih=$(),sh=re().pathExists,Ou=Mt();function oh(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=nh.dirname(e);sh(i,(s,o)=>{if(s)return n(s);if(o)return Ou.writeJson(e,t,r,n);ih.mkdirs(i,u=>{if(u)return n(u);Ou.writeJson(e,t,r,n)})})}xu.exports=oh});var Lu=h((Hg,Ru)=>{"use strict";var uh=q(),ah=require("path"),ch=$(),lh=Mt();function fh(e,t,r){let n=ah.dirname(e);uh.existsSync(n)||ch.mkdirsSync(n),lh.writeJsonSync(e,t,r)}Ru.exports=fh});var Pu=h((Wg,Tu)=>{"use strict";var dh=F().fromCallback,D=Mt();D.outputJson=dh(qu());D.outputJsonSync=Lu();D.outputJSON=D.outputJson;D.outputJSONSync=D.outputJsonSync;D.writeJSON=D.writeJson;D.writeJSONSync=D.writeJsonSync;D.readJSON=D.readJson;D.readJSONSync=D.readJsonSync;Tu.exports=D});var Du=h((zg,ku)=>{"use strict";var ju=q(),mh=require("path"),yh=un().copySync,Nu=Je().removeSync,hh=$().mkdirpSync,Au=$e();function gh(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=Au.checkPathsSync(e,t,"move");return Au.checkParentPathsSync(e,i,t,"move"),hh(mh.dirname(t)),ph(e,t,n)}function ph(e,t,r){if(r)return Nu(t),Cu(e,t,r);if(ju.existsSync(t))throw new Error("dest already exists.");return Cu(e,t,r)}function Cu(e,t,r){try{ju.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return vh(e,t,r)}}function vh(e,t,r){return yh(e,t,{overwrite:r,errorOnExist:!0}),Nu(e)}ku.exports=gh});var Fu=h((Ug,Iu)=>{"use strict";Iu.exports={moveSync:Du()}});var Wu=h((Jg,Mu)=>{"use strict";var Sh=q(),wh=require("path"),Eh=cn().copy,$u=Je().remove,bh=$().mkdirp,_h=re().pathExists,Bu=$e();function Oh(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;Bu.checkPaths(e,t,"move",(s,o)=>{if(s)return n(s);let{srcStat:u}=o;Bu.checkParentPaths(e,u,t,"move",a=>{if(a)return n(a);bh(wh.dirname(t),d=>d?n(d):xh(e,t,i,n))})})}function xh(e,t,r,n){if(r)return $u(t,i=>i?n(i):Hu(e,t,r,n));_h(t,(i,s)=>i?n(i):s?n(new Error("dest already exists.")):Hu(e,t,r,n))}function Hu(e,t,r,n){Sh.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):qh(e,t,r,n):n())}function qh(e,t,r,n){Eh(e,t,{overwrite:r,errorOnExist:!0},s=>s?n(s):$u(e,n))}Mu.exports=Oh});var Uu=h((Vg,zu)=>{"use strict";var Rh=F().fromCallback;zu.exports={move:Rh(Wu())}});var Gu=h((Yg,Ju)=>{"use strict";var Lh=F().fromCallback,Ge=q(),Vu=require("path"),Yu=$(),Th=re().pathExists;function Ph(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Vu.dirname(e);Th(i,(s,o)=>{if(s)return n(s);if(o)return Ge.writeFile(e,t,r,n);Yu.mkdirs(i,u=>{if(u)return n(u);Ge.writeFile(e,t,r,n)})})}function kh(e,...t){let r=Vu.dirname(e);if(Ge.existsSync(r))return Ge.writeFileSync(e,...t);Yu.mkdirsSync(r),Ge.writeFileSync(e,...t)}Ju.exports={outputFile:Lh(Ph),outputFileSync:kh}});var Qu=h((Gg,fn)=>{"use strict";fn.exports=Object.assign({},Vr(),un(),cn(),Yo(),gu(),Pu(),$(),Fu(),Uu(),Gu(),re(),Je());var Ku=require("fs");Object.getOwnPropertyDescriptor(Ku,"promises")&&Object.defineProperty(fn.exports,"promises",{get(){return Ku.promises}})});function Xu(e){return(0,ve.join)("__backends__",`${e}.js`)}var ve,$t,jh,Qg,Xg,Zg,Nh,e0,Zu=A(()=>{ve=ie(require("path")),$t=".layer0",jh=(0,ve.join)($t,"lambda"),Qg=(0,ve.join)($t,"s3"),Xg=(0,ve.join)($t,"s3-permanent"),Zg=(0,ve.join)($t,"src"),Nh="routes.js";e0=(0,ve.join)(process.cwd(),jh,Nh)});var ta=h((t0,ea)=>{"use strict";ea.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});function Se(modulePath,{ignoreErrors=!1}={}){try{return eval("require")((0,ra.default)(modulePath))}catch(e){if(ignoreErrors)return;throw e}}var ra,Bt=A(()=>{ra=ie(ta())});function ia(e){return Nr()?Ch().runAndReturn(e):(global.__layer0_timings__=new na,e())}function Ch(){let e=Se("cls-hooked");return dn||(dn=e.createNamespace(Ah)),dn}var Ah,dn,na,sa=A(()=>{Ar();Bt();Ah="layer0";na=class{constructor(){this.values={}}get(t){return this.values[t]}set(t,r){this.values[t]=r}}});function oa(e){return(...t)=>ia(()=>e(...t))}var ua,aa,ca=A(()=>{ke();sa();(function(e){e.edgeCache="oc",e.transformRequest="wa",e.transformResponse="wz",e.routeMatching="wr",e.proxying="wp"})(ua||(ua={}));(function(e){e.hit="hit",e.pass="pass",e.cached="cached"})(aa||(aa={}))});function mn(e){return typeof e=="string"&&(e=Se(e)),e.default&&(e=e.default),typeof e=="function"&&(e=e()),e}var la=A(()=>{Bt()});var ya=h(yn=>{"use strict";var fa=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,Dh=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,da=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,Ih=/\\([\u000b\u0020-\u00ff])/g,Fh=/([\\"])/g,ma=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;yn.format=Mh;yn.parse=$h;function Mh(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!ma.test(r))throw new TypeError("invalid type");var n=r;if(t&&typeof t=="object")for(var i,s=Object.keys(t).sort(),o=0;o<s.length;o++){if(i=s[o],!da.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+Bh(t[i])}return n}function $h(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?Hh(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),n=r!==-1?t.substr(0,r).trim():t.trim();if(!ma.test(n))throw new TypeError("invalid media type");var i=new Wh(n.toLowerCase());if(r!==-1){var s,o,u;for(fa.lastIndex=r;o=fa.exec(t);){if(o.index!==r)throw new TypeError("invalid parameter format");r+=o[0].length,s=o[1].toLowerCase(),u=o[2],u[0]==='"'&&(u=u.substr(1,u.length-2).replace(Ih,"$1")),i.parameters[s]=u}if(r!==t.length)throw new TypeError("invalid parameter format")}return i}function Hh(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function Bh(e){var t=String(e);if(da.test(t))return t;if(t.length>0&&!Dh.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(Fh,"\\$1")+'"'}function Wh(e){this.parameters=Object.create(null),this.type=e}});function hn(e){return typeof e=="string"}var ha=A(()=>{});var pa,ga,zh,Uh,va,Sa=A(()=>{pa=ie(ya()),ga=ie(require("zlib"));ha();zh=["application/atom_xml","application/javascript","application/json","application/rss+xml","application/vnd.ms-fontobject","application/x-font-opentype","application/x-font-ttf","application/x-javascript","application/xhtml+xml","application/xml","application/xml+rss","font/eot","font/opentype","font/otf","image/svg+xml","image/x-icon","text/css","text/html","text/javascript","text/js","text/plain"],Uh=(e,t)=>{let r=e.getHeader("content-type");if(r=hn(r)?[r]:r,!r||!zh.includes((0,pa.parse)(r[0]).type.toLowerCase()))return;let n=(0,ga.gzipSync)(Buffer.from(t.body));e.setHeader("content-length",Buffer.byteLength(n)),e.setHeader("content-encoding","gzip"),t.body=n},va=Uh});var Ea=h((p0,wa)=>{wa.exports={name:"@layer0/core",version:"3.16.3",main:"./index.js",license:"UNLICENSED",scripts:{docs:"typedoc",build:"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; npm run bundle-handler;","bundle-handler":"esbuild src/lambda/handler.ts --bundle --minify --platform=node --target=node14.0 --outfile=dist/lambda/handler.js --log-level=error --sourcemap",watch:"npm-watch","ts:watch":"tsc --watch","push-build":"npm run build && cd dist && yalc push && cd ..",release:"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next",test:"jest --watchAll=false --runInBand --forceExit"},dependencies:{"@babel/parser":"^7.13.15","@babel/traverse":"^7.13.15","@types/lodash.clonedeep":"^4.5.6",ajv:"^6.12.6","babel-loader":"^8.2.2",chalk:"^2.4.2",chokidar:"^3.5.1","cls-hooked":"^4.2.2","content-type":"^1.0.4",cookie:"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0",deepmerge:"^4.2.2",esbuild:"^0.11.15",express:"^4.17.1","fs-extra":"^8.1.0",globby:"^11.0.2","http-proxy":"^1.18.1","lodash.clonedeep":"^4.5.0","lru-cache":"^6.0.0","mime-types":"^2.1.29","node-fetch":"^2.6.1","path-to-regexp":"^6.2.0",pino:"^6.11.2","resolve-package-path":"^2.0.0",shelljs:"^0.8.4",slash:"^3.0.0","tcp-port-used":"^1.0.2","ts-loader":"^8.2.0",uuid:"^8.3.2"},publishConfig:{directory:"dist"},watch:{"push-build":{patterns:["src","bin","serverless.yml","default-app","package.json"],extensions:["js","ts"],quiet:!1}},jest:{clearMocks:!0,collectCoverage:!0,transform:{"^.+\\.(js)?$":"babel-jest","^.+\\.ts$":"ts-jest"},moduleFileExtensions:["ts","js","json"],setupFilesAfterEnv:["<rootDir>/test/jest.js"],transformIgnorePatterns:["<rootDir>/node_modules/"],moduleNameMapper:{"../package.json":"<rootDir>/package.json","^@layer0/core(.*)$":"<rootDir>/src/$1"},collectCoverageFrom:["./src/**/*.{ts,js}","!**/mocks/**","!**/index.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},devDependencies:{"@types/cls-hooked":"^4.3.1","@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/lodash":"^4.14.162","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/node":"^14.6.4","@types/route-parser":"^0.1.3","@types/shelljs":"^0.8.8","@types/tcp-port-used":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack-bundle-analyzer":"^3.9.0",lodash:"^4.17.21",webpack:"^5.27.0","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^4.1.0"}}});function Jh(){return process.env[_t.versionOverride]||Ea().version}function Vh(e){gn(e,I.x0Status,`w=${e.statusCode}`)}function Yh(e,t){let r=t.lambda;gn(e,I.x0T,`wt=${t.duration},wc=${r.invocationCounter},wa=${r.age},wl=${r.lifetimeDuration}`)}function Gh(e,t,r){gn(e,I.x0Components,`w=${t},wi=${r}`)}function gn(e,t,r){let n=e.multiValueHeaders[t];n?Array.isArray(n)?n[0]=`${r},${n[0]}`:e.multiValueHeaders[t]=`${r},${n}`:e.multiValueHeaders[t]=`${r}`}var Ht,pn,ba,_a=A(()=>{Ht=ie(require("querystring"));Kt();ke();Sa();pn=ie(require("stream"));ba=(e,t)=>{let r={body:Buffer.from(""),isBase64Encoded:!0,statusCode:200,statusMessage:"OK",multiValueHeaders:{}},n,i=new pn.default.Readable;if(i.url=e.path,i.path=e.path,i.query={},i.method=e.httpMethod,i.rawHeaders=[],i.headers={},e.multiValueQueryStringParameters&&Object.keys(e.multiValueQueryStringParameters).length){let c=(0,Ht.stringify)(e.multiValueQueryStringParameters);i.url+=`?${c}`,i.query=(0,Ht.parse)(c)}let s=e.multiValueHeaders||{};for(let c of Object.keys(s)){for(let f of s[c])i.rawHeaders.push(c),i.rawHeaders.push(f);i.headers[c.toLowerCase()]=s[c].toString()}i.getHeader=c=>i.headers[c.toLowerCase()],i.getHeaders=()=>i.headers,i.connection={},i.secure=i.getHeader(I.x0Protocol)!=="http",i.socket={encrypted:i.secure},i.connection={encrypted:i.secure},i.protocol=i.secure?"https":"http";let o;i.headers[I.xRequestId]||(o=ft(),i.headers[I.xRequestId]=o);let u=new pn.default;Object.defineProperty(u,"statusCode",{get(){return r.statusCode},set(c){r.statusCode=c}}),Object.defineProperty(u,"statusMessage",{get(){return r.statusMessage},set(c){r.statusMessage=c}}),u.headers={},u.writeHead=(c,f,l)=>{r.statusCode=c,typeof f=="string"?r.statusMessage=f:typeof f=="object"&&(l=f,f=void 0),typeof l=="object"&&Object.entries(l).forEach(([y,m])=>{u.setHeader(y,m)}),o&&u.setHeader(I.xRequestId,o)},u.write=c=>{r.body=Buffer.concat([r.body,Buffer.isBuffer(c)?c:Buffer.from(c)])},u.setHeader=(c,f)=>{u.headers[c.toLowerCase()]=f},u.removeHeader=c=>{delete u.headers[c.toLowerCase()]},u.getHeader=c=>u.headers[c.toLowerCase()],u.getHeaders=()=>u.headers;let a=c=>f=>{f&&u.write(f),(i.getHeader(I.acceptEncoding)||"").split(",").includes("gzip")&&u.getHeader(I.contentEncoding)==null&&va(u,r),r.body=r.body.toString("base64"),r.multiValueHeaders=u.headers,t.stop(),Vh(r),Yh(r,t),Gh(r,Jh(),t.lambda.id),d(),c(r)};n=new Promise(c=>{u.end=a(c)}),e.body&&(i.push(e.body,e.isBase64Encoded?"base64":void 0),i._rawBodyBase64=e.body),i.push(null);function d(){for(let c of Object.keys(r.multiValueHeaders))Array.isArray(r.multiValueHeaders[c])||(r.multiValueHeaders[c]=[r.multiValueHeaders[c]])}return{req:i,res:u,responsePromise:n}}});var xa={};we(xa,{handler:()=>Qh});async function Qh(e,t){let r=new dt(t);switch(r.start(),e.action){case"getEdgeConfig":return Ke.createEdgeConfig();case"getPreloadConfig":return vn(()=>Ke.createPreloadConfig())}let n,i,s;try{let o=ba(e,r);n=o.req,i=o.res,s=o.responsePromise}catch(o){return vn(()=>(console.log("Failed to parse the event to get request and response data:",o.message,o.stackTrace),{body:Buffer.from('{"error":"Failed to parse the event to get request and response data"}'),isBase64Encoded:!0,statusCode:530,statusMessage:"Internal Layer0 Error",multiValueHeaders:{}}))}return await vn(async()=>{let o=n.headers||{};Dr(T({method:n.method,path:n.url,host:o.host,headers:o,protocol:`${o["x-0-protocol"]||"https"}:`},Ne(n._rawBodyBase64,n.headers)));try{await Kh(3001)}catch(u){throw console.error(u),u}return oa(()=>Ke.run(n,i))(),s.then(u=>{let a=i.headers||{};return Ir(T({statusCode:i.statusCode,statusMessage:i.statusMessage,headers:a},Ne(u.body,i.headers))),u})},n)}async function Xh(e){let t=(0,qa.join)(process.cwd(),Xu(xt.js));if((0,Oa.existsSync)(t)){let r=Se(t);r.default&&(r=r.default),await r(e),Ke.setBackend(xt.js,{domainOrIp:bs,port:e}),Ke.setBackend(xt.imageOptimizer,{domainOrIp:process.env.LAYER0_IMAGE_OPTIMIZER_HOST,port:process.env.LAYER0_IMAGE_OPTIMIZER_PORT})}}async function Kh(e){return Sn||(Sn=Xh(e)),Sn}function Zh(e){(process.env.LAYER0_LOCAL!=="true"||process.env.LAYER0_LOCAL_CONSOLE_WRAP==="true")&&Rt.enable({clientIp:e&&e.headers[I.x0ClientIp],requestId:e&&e.headers[I.xRequestId]})}function ep(){Rt.disable()}async function vn(e,t){try{return Zh(t),await e()}finally{ep()}}var Oa,qa,Ke,Sn,Ra=A(()=>{ke();Oa=ie(Qu()),qa=ie(require("path"));Zu();ca();la();Bt();_a();Fr();$r();Xt();Ke=mn("./routes")});_n(exports);we(exports,{handler:()=>sp});var{default:tp}=(Xt(),Hn),rp=new tp,{enableRequestLogging:np,disableRequestLogging:ip}=Fs();async function sp(e){return process.env.LAYER0_HTTP_REQUEST_LOGGING==="1"?np():ip(),(async()=>{let{handler:t}=(Ra(),xa);return await t(e,rp)})()}0&&(module.exports={handler});
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
//# sourceMappingURL=handler.js.map
